(this.webpackJsonpibuyit=this.webpackJsonpibuyit||[]).push([[0],{223:function(e,t){},225:function(e,t){},233:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(33),s=c.n(r),o=(c(167),c(16)),i=c(245),l=c(267),j=c(156),d=c(5),u=c.n(d),b=c(11),h=c(2),O=c(10),x=c.n(O),p=c(150),m=c(0),f=Object(a.createContext)(),g=function(e){var t=e.children,c=Object(o.g)(),n=localStorage.getItem("token"),r=Object(a.useState)(!1),s=Object(h.a)(r,2),i=s[0],l=s[1],j=Object(a.useState)(null),d=Object(h.a)(j,2),O=d[0],g=d[1],v=Object(a.useState)(!1),y=Object(h.a)(v,2),k=y[0],w=y[1],S=Object(a.useState)([]),I=Object(h.a)(S,2),C=I[0],N=I[1],T=Object(a.useState)([]),B=Object(h.a)(T,2),A=B[0],E=B[1],D=Object(a.useState)(!0),z=Object(h.a)(D,2),F=z[0],P=z[1],R=Object(a.useState)({}),U=Object(h.a)(R,2),L=U[0],H=U[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","categories"));case 4:return t=e.sent,c=t.data,N(c),e.next=9,x.a.get("".concat("https://ekosh.software/","subcategories"));case 9:a=e.sent,n=a.data,E(n),l(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),3e3),l(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),3e3),l(!1));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[F]),Object(a.useEffect)((function(){if(n){var e=Object(p.a)(n);console.log(e,Date.now()),console.log(new Date(1e3*e.exp).toLocaleString()),Date.now()<1e3*e.exp?(console.log("token not expired"),w(!0)):(console.log("token expired"),localStorage.removeItem("token"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("userType"),w(!1),c.push("/signin"))}}),[n,c]);var M=function(){var e=Object(b.a)(u.a.mark((function e(t){var c,a,n,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.password===t.passwordConfirm){e.next=4;break}return g("Passwords do not match"),setTimeout((function(){return g(null)}),3e3),e.abrupt("return");case 4:return e.prev=4,l(!0),e.next=8,x.a.post("".concat("https://ekosh.software/","users/"),t);case 8:c=e.sent,a=c.data,n=a.token,r=a.userName,s=a.userId,o=a.userType,localStorage.setItem("token",n),localStorage.setItem("userName",r),localStorage.setItem("userId",s),localStorage.setItem("userType",o),w(!0),l(!1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),3e3),l(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),3e3),l(!1));case 25:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(u.a.mark((function e(t){var c,a,n,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,x.a.post("".concat("https://ekosh.software/","users/signin"),t);case 4:c=e.sent,a=c.data,n=a.token,r=a.userName,s=a.userId,o=a.userType,localStorage.setItem("token",n),localStorage.setItem("userName",r),localStorage.setItem("userId",s),localStorage.setItem("userType",o),w(!0),l(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),5e3),l(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),5e3),l(!1));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(f.Provider,{value:{searchParams:L,setSearchParams:H,categoriesList:C,subCategoriesList:A,loading:i,isAuthenticated:k,error:O,signUp:M,signIn:q,signOut:function(){localStorage.removeItem("token"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("userType"),w(!1)},setLoading:l,setError:g,updateMenuItems:F,setUpdateMenuItems:P},children:t})},v=c(3),y=c(6),k=function(e){var t=e.component,c=Object(y.a)(e,["component"]),n=Object(o.h)().pathname;return Object(a.useContext)(f).isAuthenticated?Object(m.jsx)(o.b,Object(v.a)(Object(v.a)({},c),{},{render:function(){return Object(m.jsx)(t,{})}})):Object(m.jsx)(o.a,{to:{pathname:"/",state:{next:n}}})},w=c(283),S=c(284),I=c(280),C=c(246),N=c(247),T=c(248),B=c(249),A=c(250),E=c(251),D=c(252),z=c(253),F=c(254),P=c(255),R=c(256),U=c(257),L=c(8),H=c(281),M=c(239),q=c(152),Y=c(154),V=c(240),K=c(241),Z=c(160),W=c(161),G=function(e){var t=e.setCoords,c=e.setCityId,n=e.cityPlaceholder,r=Object(a.useState)(""),s=Object(h.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)([]),j=Object(h.a)(l,2),d=j[0],O=j[1],p=Object(a.useState)(!1),f=Object(h.a)(p,2),g=f[0],v=f[1],y=Object(a.useRef)(null),k=Object(a.useRef)(null),w=function(){var e=Object(b.a)(u.a.mark((function e(t){var c,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={searchString:t},e.next=3,x.a.post("".concat("https://ekosh.software/","search/plzorcity/"),c);case 3:a=e.sent,n=a.data,O(n),n.length>0?v(!0):v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n&&i(n)}),[n]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(q.a,{type:"text",placeholder:"City or ZIP","aria-label":"SearchCityPLZ",value:o,onChange:function(e){console.log(e.target.value),c(null),t(null);var a=e.target.value;i(a),a.length>2?(k.current&&clearTimeout(k.current),k.current=setTimeout((function(){w(a)}),1e3)):k.current&&clearTimeout(k.current)},onBlur:function(){return v(!1)},onFocus:function(){return o.length>3&&d.length>0&&v(!0)},ref:y}),Object(m.jsx)(Z.a,{target:y.current,show:g,placement:"bottom",children:Object(m.jsx)(W.a,{className:"overflow-auto",style:{maxHeight:"50%"},id:"popover-basic",children:Object(m.jsx)(W.a.Body,{children:d.map((function(e,a){return Object(m.jsx)(I.a.Item,{onClick:function(){return i((a=e).name),c(a.id),void t(a.coords);var a},children:e.name},"optK".concat(a))}))})})})]})},J=function(){var e=Object(a.useContext)(f).setSearchParams,t=Object(o.g)(),c=Object(a.useState)(),n=Object(h.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(),l=Object(h.a)(i,2),j=l[0],d=l[1],u=Object(a.useState)(""),b=Object(h.a)(u,2),O=b[0],x=b[1],p=Object(a.useState)(""),g=Object(h.a)(p,2),v=g[0],y=g[1];return Object(m.jsx)(w.a.Text,{className:"me-auto",children:Object(m.jsxs)(H.a,{className:"d-flex flex-column flex-md-row",onSubmit:function(c){c.preventDefault(),e({cityId:r,cityCoords:j,distance:v,searchText:O});t.push({pathname:"/search",state:{fromDashboard:!0}})},children:[Object(m.jsxs)(M.a,{className:"col",children:[Object(m.jsx)(M.a.Text,{style:{backgroundColor:"#f7f7f9"},children:Object(m.jsx)(V.a,{})}),Object(m.jsx)(q.a,{type:"search",placeholder:"Search",className:"mr-2","aria-label":"Search",onChange:function(e){return x(e.target.value)}})]}),Object(m.jsxs)(M.a,{className:"col",children:[Object(m.jsx)(M.a.Text,{style:{backgroundColor:"#f7f7f9"},children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(G,{setCoords:d,setCityId:s})]}),Object(m.jsxs)(M.a,{className:"col",children:[Object(m.jsx)(M.a.Text,{style:{backgroundColor:"#f7f7f9"},children:"+"}),Object(m.jsx)(q.a,{type:"text",as:"input",htmlSize:1,placeholder:"0 km",className:"mr-2","aria-label":"radius",onChange:function(e){var t=new RegExp(/^[0-9]*$/);e.target.value.match(t)&&(console.log(e.target.value),parseInt(e.target.value,10)>100?y(100):y(e.target.value))},value:v,list:"distance-variants"}),Object(m.jsxs)("datalist",{id:"distance-variants",children:[Object(m.jsx)("option",{value:"5"}),Object(m.jsx)("option",{value:"10"}),Object(m.jsx)("option",{value:"15"}),Object(m.jsx)("option",{value:"25"}),Object(m.jsx)("option",{value:"50"})]}),Object(m.jsx)(Y.a,{type:"submit",variant:"secondary",style:{backgroundColor:"#f7f7f9"},children:"Search"})]})]})})},Q=c(285),$=c(244),_=c(242),X=c(243),ee=function(e){var t=e.setShow,c=Object(a.useContext)(f),n=c.categoriesList,r=c.subCategoriesList,s=c.loading,o=c.error;return s?Object(m.jsx)(_.a,{animation:"border",variant:"secondary"}):o?Object(m.jsx)(X.a,{variant:"danger",children:o}):Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(I.a.Item,{as:L.b,to:"/",onClick:function(){return t(!1)},children:"View all ads"})}),Object(m.jsx)("li",{children:Object(m.jsx)(I.a.Item,{as:L.b,to:"/buylocal",onClick:function(){return t(!1)},children:"Buy local (map)"})}),n.map((function(e,c){return Object(m.jsxs)("li",{children:[Object(m.jsx)(I.a.Item,{as:L.b,to:"/bycategory/".concat(e.id),onClick:function(){return t(!1)},children:e.description}),Object(m.jsx)("ul",{children:r.filter((function(t){return t.parentId===e.id})).map((function(e,c){return Object(m.jsxs)("li",{children:[" ",Object(m.jsx)(I.a.Item,{as:L.b,to:"/bysubcategory/".concat(e.id),onClick:function(){return t(!1)},children:e.description})," "]},"liksc".concat(c))}))})]},"likc".concat(c))}))]})},te=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),c=t[0],n=t[1];return Object(m.jsxs)(w.a.Text,{className:"me-auto",children:[Object(m.jsxs)(Y.a,{variant:"secondary",onClick:function(){return n(!0)},children:[Object(m.jsx)($.a,{size:24})," Menu"]}),Object(m.jsxs)(Q.a,{show:c,onHide:function(){return n(!1)},children:[Object(m.jsx)(Q.a.Header,{closeButton:!0,children:Object(m.jsx)(Q.a.Title,{children:"What would you like to buy?"})}),Object(m.jsx)(Q.a.Body,{children:Object(m.jsx)(ee,{setShow:n})})]})]})},ce=function(){var e=Object(a.useContext)(f),t=e.isAuthenticated,c=e.signOut,n=localStorage.getItem("userType");return Object(m.jsx)(w.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(m.jsxs)(i.a,{fluid:!0,children:[Object(m.jsx)(w.a.Brand,{as:L.c,to:"/",children:"I buy it!"}),Object(m.jsx)(w.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(m.jsxs)(w.a.Collapse,{id:"responsive-navbar-nav",children:[Object(m.jsx)(te,{}),Object(m.jsx)(J,{}),Object(m.jsx)(S.a,{children:t?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(I.a,{align:"end",children:[Object(m.jsxs)(I.a.Toggle,{as:S.a.Link,children:[Object(m.jsx)(C.a,{size:24})," "," "," ",localStorage.getItem("userName")]}),Object(m.jsxs)(I.a.Menu,{children:[Object(m.jsxs)(I.a.Item,{as:L.b,to:"/newad",children:[Object(m.jsx)(N.a,{size:24,style:{marginRight:"1rem"}})," Sell!"]}),Object(m.jsxs)(I.a.Item,{as:L.b,to:"/myads",children:[Object(m.jsx)(T.a,{size:24,style:{marginRight:"1rem"}})," My ads"]}),Object(m.jsxs)(I.a.Item,{as:L.b,to:"/myprofile",children:[Object(m.jsx)(B.a,{size:24,style:{marginRight:"1rem"}}),"My profile"]}),Object(m.jsxs)(I.a.Item,{as:L.b,to:"/mystore",children:[Object(m.jsx)(A.a,{size:24,style:{marginRight:"1rem"}}),"My Store"]}),Object(m.jsxs)(I.a.Item,{as:L.b,to:"/messages",children:[Object(m.jsx)(E.a,{size:24,style:{marginRight:"1rem"}}),"Notifications"]}),Object(m.jsxs)(I.a.Item,{as:L.b,to:"/myfavads",children:[Object(m.jsx)(D.a,{size:24,style:{marginRight:"1rem"}}),"Fav ads"]}),Object(m.jsxs)(I.a.Item,{as:L.b,to:"/myfavusers",children:[Object(m.jsx)(z.a,{size:24,style:{marginRight:"1rem"}}),"Fav users"]}),Object(m.jsxs)(I.a.Item,{as:L.b,to:"/mychats",children:[Object(m.jsx)(F.a,{size:24,style:{marginRight:"1rem"}}),"My chats"]}),Object(m.jsx)(I.a.Divider,{}),Object(m.jsxs)(I.a.Item,{onClick:c,children:[Object(m.jsx)(P.a,{size:24})," Log out"]})]})]})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(S.a.Link,{as:L.c,to:"/signin",children:[Object(m.jsx)(R.a,{size:24})," Sign in"]}),Object(m.jsxs)(S.a.Link,{as:L.c,to:"/signup",children:[Object(m.jsx)(U.a,{size:24})," Sign up"]})]})}),"999"===n&&t&&Object(m.jsx)(S.a,{children:Object(m.jsxs)(I.a,{align:"end",children:[Object(m.jsx)(I.a.Toggle,{variant:"danger",id:"dropdown-basic",children:"Admin panel"}),Object(m.jsxs)(I.a.Menu,{children:[Object(m.jsx)(I.a.Item,{as:L.b,to:"/admin/categoryeditor",children:"Edit categories"}),Object(m.jsx)(I.a.Item,{as:L.b,to:"/admin/usertypeeditor",children:"Edit user types"}),Object(m.jsx)(I.a.Item,{as:L.b,to:"/admin/userlist",children:"Edit users"}),Object(m.jsx)(I.a.Item,{as:L.b,to:"/admin/storeslist",children:"Edit stores"})]})]})})]})]})})},ae=c(288),ne=c(268),re=c(258),se=c(259),oe=c(260),ie=c(261),le=c(262),je=c(263),de=function(e){var t=e.targetId,c=e.description,n=e.path,r=Object(a.useContext)(f).isAuthenticated,s=Object(a.useState)(!1),o=Object(h.a)(s,2),i=o[0],l=o[1],j=function(){var e=Object(b.a)(u.a.mark((function e(){var a,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://ekosh.software/","favads/"),r={favAdId:t,description:c},"user"===n&&(a="".concat("https://ekosh.software/","favusers/"),r={favUserId:t,description:c}),e.prev=3,e.next=6,x.a.post(a,r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 6:s=e.sent,o=s.data,console.log(o),l(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response?console.log(e.t0.response.data.error):console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();return r?i?"user"===n?Object(m.jsx)(le.a,{color:"red"}):Object(m.jsx)(je.a,{color:"red"}):"user"===n?Object(m.jsx)(oe.a,{color:"red",style:{cursor:"pointer"},onClick:function(){return j()}}):Object(m.jsx)(ie.a,{color:"red",style:{cursor:"pointer"},onClick:function(){return j()}}):Object(m.jsx)(re.a,{overlay:Object(m.jsx)(se.a,{id:"tooltip-disabled",children:"Sign in to add to favs"}),children:Object(m.jsx)("span",{className:"d-inline-block",children:"user"===n?Object(m.jsx)(oe.a,{style:{pointerEvents:"none"}}):Object(m.jsx)(ie.a,{style:{pointerEvents:"none"}})})})},ue=c(282),be=c(266),he=c(287),Oe=c(264),xe=c(265),pe=function(e){var t=e.adId,c=Object(a.useState)(!1),n=Object(h.a)(c,2),r=n[0],s=n[1],o=Object(a.useState)(!1),i=Object(h.a)(o,2),l=i[0],j=i[1],d=localStorage.getItem("userType"),O=function(){return s(!1)},p=function(){var e=Object(b.a)(u.a.mark((function e(){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete("".concat("https://ekosh.software/","ads/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:c=e.sent,a=c.data,console.log(a),s(!1),a.id===t&&j(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return"999"===d?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(ae.a.Header,{children:[Object(m.jsx)(L.b,{to:"/editad/".concat(t),style:{textDecoration:"none"},children:Object(m.jsx)(Oe.a,{style:{cursor:"pointer"}})}),Object(m.jsx)(xe.a,{style:{cursor:"pointer"},onClick:function(){return s(!0)}})]}),Object(m.jsxs)(ue.a,{show:r,onHide:O,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Confirmation needed!"})}),Object(m.jsx)(ue.a.Body,{children:"Do you really want to delete this article?"}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:O,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:p,children:"Yes, pls delete!"})]})]}),Object(m.jsx)(be.a,{className:"p-3",position:"middle-center",children:Object(m.jsx)(he.a,{bg:"warning",onClose:function(){return j(!1)},show:l,delay:3e3,autohide:!0,children:Object(m.jsxs)(he.a.Body,{children:[" Article # ",t," was deleted! "]})})})]}):null},me=function(e){var t=e.photo,c=e.title,a=(e.address,e.price),n=e.created,r=e.catId,s=e.adId,o=e.views,d=e.cityName,u=e.cityId,b=(e.category,e.subCategory),h=e.subCategoryId;return Object(m.jsx)(j.a,{children:Object(m.jsxs)(ae.a,{style:{width:"18rem",minHeight:"36rem"},border:13===r?"success":"secondary",children:[Object(m.jsx)(pe,{adId:s}),Object(m.jsx)(L.b,{to:"/view/".concat(s),children:Object(m.jsx)(ae.a.Img,{className:"p-3",style:{objectFit:"cover",height:"20rem"},variant:"top",src:t&&t.length>0?"".concat("https://ekosh.software/","images/").concat(t[0]):"/images/noimg.png"})}),Object(m.jsxs)(ae.a.Body,{children:[Object(m.jsxs)(ae.a.Title,{children:["0"==a?"Free":"".concat(a," \u20ac")," "]}),Object(m.jsx)(ae.a.Text,{children:Object(m.jsxs)(L.b,{to:"/view/".concat(s),style:{textDecoration:"none"},children:[c.substring(0,100),c.length>100&&"..."]})})]}),Object(m.jsx)(i.a,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(de,{targetId:s,description:c})})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(L.b,{className:"fs-6 text-muted",to:"/bysubcategory/".concat(h),style:{textDecoration:"none"},children:[b," "]}),Object(m.jsxs)(L.b,{className:"fs-6 text-muted",to:"/bycity/".concat(u),style:{textDecoration:"none"},children:[" ","in ",d]})]})}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{xs:9,children:Object(m.jsx)("p",{className:"fs-6",children:new Date(n).toLocaleString()})}),Object(m.jsx)(j.a,{xs:3,children:Object(m.jsxs)("p",{className:"fs-6",children:[Object(m.jsx)(ne.a,{})," ",o]})})]})]})})})]})})},fe=function(){return Object(m.jsx)("div",{className:"d-flex justify-content-center",style:{minHeight:"50vh"},children:Object(m.jsx)(_.a,{animation:"border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},ge=c(18),ve=c(289),ye=function(e){var t=e.totalPages,c=e.currentPage,a=e.cbPageClick,n=e.pageNeighbours,r="LEFT",s="RIGHT",o=function(e,t){for(var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e,n=[];a<=t;)n.push(a),a+=c;return n},i=function(){var e=2*(n="number"===typeof n?Math.max(0,Math.min(n,2)):0)+3;if(t>e+2){var a=Math.max(2,c-n),i=Math.min(t-1,c+n),l=o(a,i),j=a>2,d=t-i>1,u=e-(l.length+1);switch(!0){case j&&!d:var b=o(a-u,a-1);l=[r].concat(Object(ge.a)(b),Object(ge.a)(l));break;case!j&&d:var h=o(i+1,i+u);l=[].concat(Object(ge.a)(l),Object(ge.a)(h),[s]);break;case j&&d:default:l=[r].concat(Object(ge.a)(l),[s])}return[1].concat(Object(ge.a)(l),[t])}return o(1,t)}();return 1===t?null:Object(m.jsx)(ve.a,{children:i.map((function(e,t){return e===r?Object(m.jsx)(ve.a.Prev,{onClick:function(){return a(c-1)}}):e===s?Object(m.jsx)(ve.a.Next,{onClick:function(){return a(c+1)}}):Object(m.jsx)(ve.a.Item,{active:c===e,onClick:function(){return a(e)},children:e},"pgK".concat(e))}))})},ke=function(){return Object(m.jsx)(l.a,{className:"d-flex align-items-center justify-content-center my-5",style:{minHeight:"30vh"},children:Object(m.jsxs)(j.a,{className:"text-center",children:[Object(m.jsx)("h4",{children:"Nothing found..."}),Object(m.jsx)("p",{children:"Choose another category or change your search options..."})]})})},we=function(e){var t=e.subCatId,c=e.catId,n=e.cityId,r=e.adsByUserId,s=e.adsByStoreId,o=Object(a.useContext)(f),i=o.categoriesList,l=o.subCategoriesList,j=Object(a.useState)(),d=Object(h.a)(j,2),O=d[0],p=d[1],g=Object(a.useState)(),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(),S=Object(h.a)(w,2),I=S[0],C=S[1];return console.log(i,l),Object(a.useEffect)((function(){if(t||c){var e=c;if(t){var a=l.find((function(e){return e.id===parseInt(t,10)}));e=a.parentId,k(a),console.log(a)}var r=i.find((function(t){return t.id===parseInt(e,10)}));p(r),console.log(r)}n&&function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat("https://ekosh.software/","cities/").concat(n));case 3:t=e.sent,c=t.data,C(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[t,c,i,l,n]),console.log(t,c,n,r,s),Object(m.jsx)("nav",{"aria-label":"breadcrumb",children:Object(m.jsxs)("ol",{className:"breadcrumb",children:[Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)(L.b,{to:"/",children:"Main page"})}),O&&Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)(L.b,{to:"/bycategory/".concat(O.id),children:O.description})}),y&&Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)(L.b,{to:"/bysubcategory/".concat(y.id),children:y.description})}),I&&Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsxs)(L.b,{to:"/bycity/".concat(n),children:[" in ",I.name]})}),Object(m.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"View articles"})]})})},Se=function(){var e=Object(o.i)(),t=e.subCatId,c=e.catId,n=e.cityId,r=e.adsByUserId,s=e.adsByStoreId,i=Object(a.useState)(),d=Object(h.a)(i,2),O=d[0],p=d[1],f=Object(a.useState)(null),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(!0),w=Object(h.a)(k,2),S=w[0],I=w[1],C=Object(a.useState)(1),N=Object(h.a)(C,2),T=N[0],B=N[1],A=Object(a.useState)(),E=Object(h.a)(A,2),D=E[0],z=E[1];return Object(a.useEffect)((function(){var e="ads/";!t&&c?e+="bycategory/".concat(c):t&&!c?e+="bysubcategory/".concat(t):n?e+="bycity/".concat(n):r?e+="byuser/".concat(r):s&&(e+="bystore/".concat(s)),function(){var t=Object(b.a)(u.a.mark((function t(){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I(!0),console.log("https://ekosh.software/"),t.next=5,x.a.get("".concat("https://ekosh.software/").concat(e,"?skip=").concat(8*(T-1),"&limit=").concat(8));case 5:c=t.sent,a=c.data,p(a),a.length>0?z(Math.ceil(parseInt(a[0].totalRows,10)/8)):(z(0),B(1)),console.log(a),I(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.response?(y(t.t0.response.data.error),I(!1)):(y(t.t0.message),I(!1));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}()()}),[t,c,n,s,r,T]),S?Object(m.jsx)(fe,{}):v?Object(m.jsx)(X.a,{variant:"danger",children:v}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(we,{subCatId:t,catId:c,cityId:n,adsByUserId:r,adsByStoreId:s})})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(l.a,{className:"g-4",children:[O.length<1&&Object(m.jsx)(ke,{}),O.map((function(e,t){return Object(m.jsx)(me,{title:e.title,photo:e.photos,address:e.address,price:e.price,created:e.created,catId:e.catId,category:e.category,subCategoryId:e.subCategoryId,subCategory:e.subCategory,cityName:e.cityName,cityId:e.cityId,adId:e.adId,views:e.views},"adk".concat(t))}))]}),Object(m.jsx)(l.a,{className:"justify-content-center mt-5 border-top pt-3",children:Object(m.jsx)(j.a,{sm:"auto",children:Object(m.jsx)(ye,{totalPages:D,currentPage:T,cbPageClick:B})})})]})})]})},Ie=c(269),Ce=c(270),Ne=c(271),Te=function(){return Object(m.jsx)("div",{className:"container border-top mt-5",children:Object(m.jsxs)("footer",{className:"pt-5 d-none d-sm-block",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-2",children:[Object(m.jsx)("h5",{children:"Buy"}),Object(m.jsxs)("ul",{className:"nav flex-column",children:[Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Help"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Buyer FAQs"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Useful info"})})]})]}),Object(m.jsxs)("div",{className:"col-2",children:[Object(m.jsx)("h5",{children:"Sell"}),Object(m.jsxs)("ul",{className:"nav flex-column",children:[Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Register"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Seller FAQs"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Features"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Pricing"})})]})]}),Object(m.jsxs)("div",{className:"col-2",children:[Object(m.jsx)("h5",{children:"About Ibuyit!"}),Object(m.jsxs)("ul",{className:"nav flex-column",children:[Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Contact Us"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"News"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"Legal & Privacy information"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"FAQs"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)(L.b,{to:"/",className:"nav-link p-0 text-muted",children:"About us"})})]})]}),Object(m.jsx)("div",{className:"col-4 offset-1",children:Object(m.jsxs)("form",{children:[Object(m.jsx)("h5",{children:"Subscribe to our newsletter"}),Object(m.jsx)("p",{children:"Monthly digest of whats new and exciting from us."}),Object(m.jsxs)("div",{className:"d-flex w-100 gap-2",children:[Object(m.jsx)("label",{htmlFor:"newsletter1",className:"visually-hidden",children:"Email address"}),Object(m.jsx)("input",{id:"newsletter1",type:"text",className:"form-control",placeholder:"Email address"}),Object(m.jsx)("button",{className:"btn btn-primary",type:"button",children:"Subscribe"})]})]})})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-between pt-4 mt-4 border-top",children:[Object(m.jsx)("p",{children:"\xa9 2021 Ibuyit GMBH. All rights reserved."}),Object(m.jsxs)("ul",{className:"list-unstyled d-flex",children:[Object(m.jsx)("li",{className:"ms-3",children:Object(m.jsx)(L.b,{className:"link-dark",href:"/",children:Object(m.jsx)("svg",{className:"bi",width:"24",height:"24",children:Object(m.jsx)(Ie.a,{})})})}),Object(m.jsx)("li",{className:"ms-3",children:Object(m.jsx)(L.b,{className:"link-dark",href:"/",children:Object(m.jsx)("svg",{className:"bi",width:"24",height:"24",children:Object(m.jsx)(Ce.a,{})})})}),Object(m.jsx)("li",{className:"ms-3",children:Object(m.jsx)(L.b,{className:"link-dark",href:"/",children:Object(m.jsx)("svg",{className:"bi",width:"24",height:"24",children:Object(m.jsx)(Ne.a,{})})})})]})]})]})})},Be=c(157),Ae=function(){var e=Object(o.h)(),t=Object(a.useState)(""),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),d=i[0],O=i[1],x=Object(a.useContext)(f),p=x.loading,g=x.error,v=x.signIn,y=x.isAuthenticated,k=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v({email:n,password:d});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return y?Object(m.jsx)(o.a,{to:{pathname:e.state?e.state.next:"/",from:e.pathname}}):p?Object(m.jsx)(fe,{}):Object(m.jsx)(l.a,{className:"justify-content-center mt-5",children:Object(m.jsx)(j.a,{md:4,children:Object(m.jsxs)(H.a,{onSubmit:k,children:[g&&Object(m.jsx)(X.a,{variant:"danger",children:g}),Object(m.jsx)(H.a.Text,{className:"text-muted",children:"Please enter your email and password"}),Object(m.jsx)(Be.a,{controlId:"floatingInput",label:"Email address",children:Object(m.jsx)(H.a.Control,{type:"email",placeholder:"name@example.com",onChange:function(e){return r(e.target.value)},required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingPassword",label:"Password",className:"mb-3",children:Object(m.jsx)(H.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return O(e.target.value)},required:!0})}),Object(m.jsxs)(H.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:[Object(m.jsx)(H.a.Check,{type:"checkbox",label:"Remember me"})," "]}),Object(m.jsx)(Y.a,{variant:"primary",type:"submit",className:"w-100",children:"Sign in"})]})})})},Ee=function(){var e=Object(o.h)(),t=Object(a.useState)(""),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),d=i[0],O=i[1],x=Object(a.useState)(""),p=Object(h.a)(x,2),g=p[0],v=p[1],y=Object(a.useState)(""),k=Object(h.a)(y,2),w=k[0],S=k[1],I=Object(a.useState)(""),C=Object(h.a)(I,2),N=C[0],T=C[1],B=Object(a.useContext)(f),A=B.loading,E=B.error,D=B.signUp,z=B.isAuthenticated,F=Object(a.useState)(!1),P=Object(h.a)(F,2),R=P[0],U=P[1],L=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),U(!0),t.preventDefault(),e.next=6,D({userName:n,email:g,password:w,passwordConfirm:N,phone:d});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return z?Object(m.jsx)(o.a,{to:{pathname:e.state?e.state.next:"/",from:e.pathname}}):A?Object(m.jsx)(fe,{}):Object(m.jsx)(l.a,{className:"justify-content-center mt-5",children:Object(m.jsx)(j.a,{md:4,children:Object(m.jsxs)(H.a,{noValidate:!0,validated:R,onSubmit:L,children:[E&&Object(m.jsx)(X.a,{variant:"danger",children:E}),Object(m.jsx)(H.a.Text,{className:"text-muted",children:"Please enter your email and password"}),Object(m.jsx)(Be.a,{controlId:"floatingInputUserName",label:"Enter your name",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"John Doe",onChange:function(e){return r(e.target.value)},value:n,required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingInputPhoneNum",label:"Enter your phone number (optional)",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"tel",placeholder:"+49 123 456 789 101",onChange:function(e){return O(e.target.value)},value:d})}),Object(m.jsx)(Be.a,{controlId:"floatingInputEmail",label:"Email address",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"email",placeholder:"name@example.com",onChange:function(e){return v(e.target.value)},value:g,required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingInputPassword",label:"Password",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return S(e.target.value)},value:w,required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingInputConfirmPassword",label:"Confirm password",className:"mb-3",children:Object(m.jsx)(H.a.Control,{type:"password",placeholder:"Confirm password",onChange:function(e){return T(e.target.value)},value:N,required:!0})}),Object(m.jsx)(H.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."}),Object(m.jsx)(Y.a,{variant:"primary",type:"submit",className:"w-100",children:"Sign in"})]})})})},De=c(286),ze=c(23),Fe=function(e){var t=e.setCoords,c=e.coords,n=Object(a.useState)(!1),r=Object(h.a)(n,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){if(!s){console.log("coords in map comp",c),c||navigator.geolocation.getCurrentPosition((function(e){return t([e.coords.latitude,e.coords.longitude])}),(function(e){return console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}),o(!0)}}),[t,c,s]),Object(m.jsx)(ze.a,{height:300,center:c,defaultZoom:11,onClick:function(e){var c=e.latLng;t(c)},children:c&&Object(m.jsx)(ze.b,{width:50,anchor:c})})},Pe=c(272),Re=function(){var e=Object(o.i)().adId,t=Object(o.g)(),c=Object(a.useContext)(f),n=c.categoriesList,r=c.subCategoriesList,s={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"multipart/form-data"}},i=Object(a.useState)(!0),d=Object(h.a)(i,2),O=d[0],p=d[1],g=Object(a.useState)(null),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(),S=Object(h.a)(w,2),I=S[0],C=S[1],N=Object(a.useState)(""),T=Object(h.a)(N,2),B=T[0],A=T[1],E=Object(a.useState)(0),D=Object(h.a)(E,2),z=D[0],F=D[1],P=Object(a.useState)(""),R=Object(h.a)(P,2),U=R[0],L=R[1],M=Object(a.useState)(),q=Object(h.a)(M,2),V=q[0],K=q[1],Z=Object(a.useState)([]),W=Object(h.a)(Z,2),J=W[0],Q=W[1],$=Object(a.useState)(),_=Object(h.a)($,2),ee=_[0],te=_[1],ce=Object(a.useState)(),ae=Object(h.a)(ce,2),ne=ae[0],re=ae[1],se=Object(a.useState)(),oe=Object(h.a)(se,2),ie=oe[0],le=oe[1],je=Object(a.useState)([]),de=Object(h.a)(je,2),ue=de[0],be=de[1],he=Object(a.useState)(),Oe=Object(h.a)(he,2),xe=Oe[0],pe=Oe[1],me=Object(a.useState)(),ve=Object(h.a)(me,2),ye=ve[0],ke=ve[1],we=Object(a.useState)([]),Se=Object(h.a)(we,2),Ie=Se[0],Ce=Se[1],Ne=Object(a.useState)(),Te=Object(h.a)(Ne,2),Ae=Te[0],Ee=Te[1],ze=Object(a.useState)(!1),Re=Object(h.a)(ze,2),Ue=Re[0],Le=Re[1],He=function(){var c=Object(b.a)(u.a.mark((function c(){var a,n,r,s;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=Number.isFinite(parseFloat(z))?parseFloat(z):0,n=999===parseInt(localStorage.getItem("userType"),10)&&e?I:parseInt(localStorage.getItem("userId"),10),r={title:B,description:Ae,subCategoryId:ie,price:a,cityId:xe,address:U,photos:Ie,coords:ye,currentState:V,sellAsStore:Ue,userId:n},console.log(r),c.prev=4,p(!0),!e){c.next=12;break}return c.next=9,x.a.put("".concat("https://ekosh.software/","ads/").concat(e),r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 9:s=c.sent,c.next=15;break;case 12:return c.next=14,x.a.post("".concat("https://ekosh.software/","ads"),r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 14:s=c.sent;case 15:console.log(s.data),s.data.id&&t.push("/view/".concat(s.data.id)),p(!1),c.next=23;break;case 20:c.prev=20,c.t0=c.catch(4),c.t0.response?(k(c.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(c.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 23:case"end":return c.stop()}}),c,null,[[4,20]])})));return function(){return c.apply(this,arguments)}}(),Me=function(){var e=Object(b.a)(u.a.mark((function e(t){var c,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce((function(e){return e.filter((function(e){return e!==t}))})),c="".concat("https://ekosh.software/","image-upload/"),e.prev=2,e.next=5,x.a.delete("".concat(c).concat(t),s);case 5:a=e.sent,n=a.data,console.log(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response?(k(e.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(e.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(ne){var e=r.filter((function(e){return e.parentId===ne}));be(e),e.length>0?le(e[0].id):le(null)}else re(n[0].id)}),[ne,r,n,e]),Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","adstates"));case 4:t=e.sent,c=t.data,Q(c),K(c[0].id),p(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(k(e.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(e.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()(),e)&&function(){var t=Object(b.a)(u.a.mark((function t(){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(!0),t.next=4,x.a.get("".concat("https://ekosh.software/","ads/").concat(e));case 4:c=t.sent,a=c.data,re(a.catId),A(a.title),F(a.price),L(a.address),K(a.currentState),Ee(a.description),Ce(a.photos),console.log("photos",a.photos),ke(a.coords),te(a.cityName),pe(a.cityId),C(a.ownerId),le(a.subCategoryId),console.log(a),p(!1),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),t.t0.response?(k(t.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(t.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var qe=function(){var e=Object(b.a)(u.a.mark((function e(t){var c,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=new FormData,a=0;a<t.target.files.length;a++)c.append("image",t.target.files[a]);return e.prev=2,p(!0),e.next=6,x.a.post("".concat("https://ekosh.software/","image-upload"),c,s);case 6:n=e.sent,r=n.data,console.log(r),Ce(Ie?function(e){return[].concat(Object(ge.a)(e),Object(ge.a)(r))}:r),p(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),e.t0.response?(k(e.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(e.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return!ue||O?Object(m.jsx)(fe,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsxs)("h4",{children:[e?"Edit":"Create"," ad"]})})}),Object(m.jsxs)(l.a,{children:[y&&Object(m.jsx)(X.a,{children:y}),Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(H.a.Select,{"aria-label":"Categories list",value:ne,onChange:function(e){return re(parseInt(e.target.value,10))},children:n.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"catk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingSelectSubCat",label:"Choose sub-category",children:Object(m.jsx)(H.a.Select,{"aria-label":"Sub categories list",value:ie,onChange:function(e){return le(parseInt(e.target.value,10))},children:ue.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"subCatk".concat(t))}))})})})]}),Object(m.jsxs)(l.a,{className:"my-2",children:[Object(m.jsxs)(j.a,{sm:7,children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingInputTitle",label:"Enter title (required)",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Some title",onChange:function(e){return A(e.target.value)},value:B,required:!0})})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingTextareaDescription",label:"Enter description",children:Object(m.jsx)(H.a.Control,{as:"textarea",placeholder:"Enter description here",onChange:function(e){return Ee(e.target.value)},value:Ae,style:{height:"200px"}})})})}),Object(m.jsxs)(l.a,{className:"mt-3",children:[Object(m.jsxs)(j.a,{children:[Object(m.jsx)(H.a.Check,{required:!0,label:"Sell as store",feedback:"Sell as store",value:Ue,onChange:function(e){return Le(e.target.checked)}})," ",Object(m.jsx)("br",{}),Object(m.jsx)(H.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."})," ",Object(m.jsx)("br",{}),Object(m.jsx)(Y.a,{variant:"primary",onClick:He,children:"Submit"})]}),Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(H.a.Group,{controlId:"formFileMultiple",className:"mb-3",children:[Object(m.jsx)(H.a.Control,{type:"file",multiple:!0,onChange:qe}),Object(m.jsx)(H.a.Label,{children:"Choose photos to upload"})]}),Ie&&Ie.length>0&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(De.a,{variant:"dark",children:Ie.map((function(e,t){return Object(m.jsxs)(De.a.Item,{children:[Object(m.jsx)("img",{className:"d-block w-100",src:"".concat("https://ekosh.software/","images/").concat(e),alt:"what is it?",style:{objectFit:"scale-down",height:"25rem"}}),Object(m.jsx)(De.a.Caption,{children:Object(m.jsxs)(Y.a,{onClick:function(){return Me(e)},variant:"outline-danger",children:[" ",Object(m.jsx)(Pe.a,{size:24})," "]})})]},"photoK".concat(t))}))})})]})]})]}),Object(m.jsxs)(j.a,{sm:5,children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingInputPrice",label:"Enter price",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"1 000 000",onChange:function(e){return F(e.target.value)},value:z})})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingSelectStatus",label:"Choose status",children:Object(m.jsx)(H.a.Select,{"aria-label":"Ad statuses list",value:V,onChange:function(e){return K(parseInt(e.target.value,10))},children:J.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"statusk".concat(t))}))})})})}),Object(m.jsx)(l.a,{className:"my-2",children:Object(m.jsx)(j.a,{children:Object(m.jsx)(G,{setCoords:ke,setCityId:pe,cityPlaceholder:ee})})}),Object(m.jsx)(l.a,{className:"my-2",children:Object(m.jsx)(Be.a,{controlId:"floatingInputAddress",label:"Enter address (optional)",className:"mb-1",children:Object(m.jsx)(H.a.Control,{as:"textarea",placeholder:"Some street 1",onChange:function(e){return L(e.target.value)},value:U})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Fe,{setCoords:ke,coords:ye})})})]})]})]})},Ue=function(){var e=Object(a.useContext)(f),t=e.categoriesList,c=e.subCategoriesList,n=e.loading,r=e.error,s=e.setLoading,o=e.setError,i=e.updateMenuItems,d=e.setUpdateMenuItems,O=Object(a.useState)(),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(""),k=Object(h.a)(y,2),w=k[0],S=k[1],I=Object(a.useState)([]),C=Object(h.a)(I,2),N=C[0],T=C[1],B=Object(a.useState)(),A=Object(h.a)(B,2),E=A[0],D=A[1],z=Object(a.useState)(""),F=Object(h.a)(z,2),P=F[0],R=F[1],U=function(){var e=Object(b.a)(u.a.mark((function e(c){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s(!0),a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},"put"!==c){e.next=9;break}return e.next=6,x.a.put("".concat("https://ekosh.software/","categories/").concat(g),{category:w},a);case 6:n=e.sent,e.next=39;break;case 9:if("delete"!==c){e.next=17;break}return e.next=12,x.a.delete("".concat("https://ekosh.software/","categories/").concat(g),a);case 12:n=e.sent,v(t[0].id),S(t[0].description),e.next=39;break;case 17:if("new"!==c){e.next=23;break}return e.next=20,x.a.post("".concat("https://ekosh.software/","categories/"),{category:w},a);case 20:n=e.sent,e.next=39;break;case 23:if("newSc"!==c){e.next=29;break}return e.next=26,x.a.post("".concat("https://ekosh.software/","subcategories/"),{parentId:g,subCategory:P},a);case 26:n=e.sent,e.next=39;break;case 29:if("deleteSc"!==c){e.next=35;break}return e.next=32,x.a.delete("".concat("https://ekosh.software/","subcategories/").concat(E),a);case 32:n=e.sent,e.next=39;break;case 35:if("putSc"!==c){e.next=39;break}return e.next=38,x.a.put("".concat("https://ekosh.software/","subcategories/").concat(E),{parentId:g,subCategory:P},a);case 38:n=e.sent;case 39:console.log(n),d(!i),s(!1),e.next=48;break;case 45:e.prev=45,e.t0=e.catch(0),e.t0.response?(o(e.t0.response.data.error),setTimeout((function(){return o(null)}),3e3),s(!1)):(o(e.t0.message),setTimeout((function(){return o(null)}),3e3),s(!1));case 48:case"end":return e.stop()}}),e,null,[[0,45]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(g){var e=t.find((function(e){return e.id===g}));S(e.description);var a=c.filter((function(e){return e.parentId===g}));T(a),a.length>0?(D(a[0].id),R(a[0].description)):(R(""),D(""))}else v(t[0].id),S(t[0].description)}),[t,g,c]),Object(a.useEffect)((function(){if(E){var e=N.find((function(e){return e.id===E}));R(e.description)}}),[E,c,g,N]),n?Object(m.jsx)(fe,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{className:"py-4 bg-warning my-4",children:[r&&Object(m.jsx)(j.a,{children:Object(m.jsx)(X.a,{children:r})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(H.a.Select,{"aria-label":"Categories list",value:g,onChange:function(e){return v(parseInt(e.target.value,10))},children:t.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"catk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(M.a,{children:[Object(m.jsx)(Be.a,{controlId:"floatingInputCategory",label:"Category description",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"category description",value:w,onChange:function(e){return S(e.target.value)},required:!0})}),Object(m.jsx)(Y.a,{onClick:function(){return U("new")},variant:"outline-dark",disabled:0===w.length,children:"Add New"}),Object(m.jsx)(Y.a,{onClick:function(){return U("put")},variant:"outline-dark",disabled:0===w.length||!g,children:"Rename"}),Object(m.jsx)(Y.a,{onClick:function(){return U("delete")},variant:"danger",disabled:0===w.length||!g,children:"Delete"})]})})]}),Object(m.jsxs)(l.a,{className:"py-4 bg-warning my-4",children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(H.a.Select,{"aria-label":"Categories list",value:E,onChange:function(e){return D(parseInt(e.target.value,10))},children:N.length>0?N.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"sbcatk".concat(t))})):""})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(M.a,{children:[Object(m.jsx)(Be.a,{controlId:"floatingInputSubCategory",label:"Sub category description",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"sub category description",value:P,onChange:function(e){return R(e.target.value)},required:!0})}),Object(m.jsx)(Y.a,{onClick:function(){return U("newSc")},variant:"outline-dark",disabled:0===P.length,children:"Add New"}),Object(m.jsx)(Y.a,{onClick:function(){return U("putSc")},variant:"outline-dark",disabled:0===P.length||!E,children:"Rename"}),Object(m.jsx)(Y.a,{onClick:function(){return U("deleteSc")},variant:"danger",disabled:0===P.length||!E,children:"Delete"})]})})]})]})},Le=c(273),He=c(116),Me=function(e){var t=e.userId,c=Object(a.useContext)(f).isAuthenticated,n=Object(a.useState)(0),r=Object(h.a)(n,2),s=r[0],o=r[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat("https://ekosh.software/","rate/").concat(t,"/rating"));case 3:c=e.sent,a=c.data,o(a.avg),console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var i=function(){var e=Object(b.a)(u.a.mark((function e(c){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===parseInt(localStorage.getItem("userId"),10)){e.next=17;break}return o(c),a={targetUser:t,rating:c},e.prev=3,e.next=6,x.a.post("".concat("https://ekosh.software/","rate/"),a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 6:n=e.sent,(r=n.data).targetUser,console.log(r),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("imerer",e.t0.response.data.error),e.t0.response.data.error.endsWith('"uniqrating"')&&console.log("You have already rated this user!"),e.t0.response;case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:c&&t!==parseInt(localStorage.getItem("userId"),10)?Object(m.jsx)(He.Rating,{onClick:i,ratingValue:s}):Object(m.jsx)(He.RatingView,{ratingValue:s})})},qe=function(e){var t=e.ownerId;return Object(a.useContext)(f).isAuthenticated?t===parseInt(localStorage.getItem("userId"),10)?Object(m.jsx)(Y.a,{disabled:!0,children:"Chat"}):Object(m.jsx)(Y.a,{as:L.b,to:"/chat/".concat(t),children:"Chat"}):Object(m.jsx)(re.a,{overlay:Object(m.jsx)(se.a,{id:"tooltip-disabled",children:"Sign in to send a message"}),children:Object(m.jsx)("span",{className:"d-inline-block",children:Object(m.jsx)(Y.a,{disabled:!0,children:"Chat"})})})},Ye=function(){var e=Object(o.i)().adId,t=Object(a.useState)(!0),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(null),i=Object(h.a)(s,2),d=i[0],O=i[1],p=Object(a.useState)({}),f=Object(h.a)(p,2),g=f[0],v=f[1];return Object(a.useEffect)((function(){(function(){var t=Object(b.a)(u.a.mark((function t(){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(!0),t.next=4,x.a.get("".concat("https://ekosh.software/","ads/").concat(e));case 4:c=t.sent,a=c.data,v(a),console.log(a),r(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response?(O(t.t0.response.data.error),setTimeout((function(){return O(null)}),5e3),r(!1)):(O(t.t0.message),setTimeout((function(){return O(null)}),5e3),r(!1));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),n?Object(m.jsx)(fe,{}):Object(m.jsxs)(l.a,{children:[d&&Object(m.jsx)(X.a,{children:d}),Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)("nav",{"aria-label":"breadcrumb",children:Object(m.jsxs)("ol",{className:"breadcrumb",children:[Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)(L.b,{to:"/",children:"Main page"})}),Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)(L.b,{to:"/bycategory/".concat(g.catId),children:g.category})}),Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsx)(L.b,{to:"/bysubcategory/".concat(g.subCategoryId),children:g.subCategory})}),Object(m.jsx)("li",{className:"breadcrumb-item",children:Object(m.jsxs)(L.b,{to:"/bycity/".concat(g.cityId),children:[" in ",g.cityName]})}),Object(m.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"View article"})]})})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:Object(m.jsx)(De.a,{variant:"dark",children:g.photos&&g.photos.length>0?g.photos.map((function(e,t){return Object(m.jsx)(De.a.Item,{children:Object(m.jsx)("img",{style:{objectFit:"scale-down",height:"25rem"},className:"d-block w-100",src:"".concat("https://ekosh.software/","/images/").concat(e),alt:"Something interesting"})},"photoK".concat(t))})):Object(m.jsx)(De.a.Item,{children:Object(m.jsx)("img",{style:{objectFit:"scale-down",height:"25rem"},className:"d-block w-100",src:"/images/noimg.png",alt:"Nothing here"})})})})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)("h4",{children:g.title}),Object(m.jsx)("h3",{children:"0"==g.price?"Free":"".concat(g.price," \u20ac")}),Object(m.jsx)("p",{className:"mt-3",style:{whiteSpace:"pre-line"},children:g.description})]})}),Object(m.jsxs)(l.a,{className:"mt-4",children:[Object(m.jsx)(j.a,{children:Object(m.jsxs)("p",{className:"fs-6 text-muted",children:["Views: ",g.views]})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("p",{className:"fs-6 text-muted",children:["Status: ",g.currentStateDesc]})}),Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)(de,{targetId:g.adId,description:g.title})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("p",{className:"fs-6 text-muted text-end",children:["ID: ",g.adId]})})]})]})})]}),Object(m.jsxs)(j.a,{sm:4,children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:[g.storeId&&Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(L.b,{to:"/viewstore/".concat(g.storeId),style:{textDecoration:"none"},children:Object(m.jsx)("h4",{className:"secondary",children:g.storeName})}),Object(m.jsx)("br",{})]})}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{sm:9,children:Object(m.jsx)(L.b,{className:"fs-6 text-muted",to:"/byuser/".concat(g.ownerId),style:{textDecoration:"none"},children:Object(m.jsx)("h4",{children:g.userName})})}),Object(m.jsx)(j.a,{className:"text-end",children:Object(m.jsx)(de,{targetId:g.ownerId,description:g.userName,path:"user"})})]}),Object(m.jsx)(l.a,{className:"mt-2",children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)("h5",{children:[Object(m.jsx)(Le.a,{size:24})," ",g.userPhone]}),Object(m.jsx)("br",{})]})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Me,{userId:g.ownerId})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)("p",{className:"fs-5",children:g.userType})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsxs)("p",{className:"fs-6 text-muted",children:["Member since ",new Date(g.created).toLocaleString(),Object(m.jsx)("br",{}),"Was online ",new Date(g.wasOnline).toLocaleString()]})})})]})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:[Object(m.jsx)("h5",{children:g.cityName}),Object(m.jsx)("p",{children:g.address}),Object(m.jsx)(ze.a,{height:300,center:g.coords,defaultZoom:11,children:g.coords&&Object(m.jsx)(ze.b,{width:50,anchor:g.coords})})]})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:Object(m.jsx)(qe,{ownerId:g.ownerId})})})]})]})},Ve=c(274),Ke=function(){var e=Object(a.useContext)(f).signOut,t=Object(a.useState)({}),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(!0),o=Object(h.a)(s,2),i=o[0],d=o[1],O=Object(a.useState)(null),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(!1),k=Object(h.a)(y,2),w=k[0],S=k[1],I=function(){return S(!1)},C=function(){var t=Object(b.a)(u.a.mark((function t(){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(!0),t.next=4,x.a.delete("".concat("https://ekosh.software/","users/").concat(localStorage.getItem("userId")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=t.sent,a=c.data,console.log(a),e(),d(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response?(v(t.t0.response.data.error),setTimeout((function(){return v(null)}),5e3),d(!1)):(v(t.t0.message),setTimeout((function(){return v(null)}),5e3),d(!1));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","users/").concat(localStorage.getItem("userId")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,r(c),console.log(c),d(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(v(e.t0.response.data.error),setTimeout((function(){return v(null)}),5e3),d(!1)):(v(e.t0.message),setTimeout((function(){return v(null)}),5e3),d(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),i?Object(m.jsx)(fe,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Your profile"})})}),Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsxs)(j.a,{sm:6,children:[g&&Object(m.jsx)(X.a,{children:g}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:Object(m.jsx)("small",{className:"text-muted",children:"User name: "})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:n.name})})]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:Object(m.jsx)("small",{className:"text-muted",children:"E-Mail: "})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("h5",{children:["  ",n.email]})})]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:Object(m.jsx)("small",{className:"text-muted",children:"Phone number: "})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("h5",{children:[" ",n.phone]})})]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:Object(m.jsx)("small",{className:"text-muted",children:"Registered on: "})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("h5",{children:[new Date(n.registerDate).toLocaleString()," "]})})]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:Object(m.jsx)("small",{className:"text-muted",children:"User type: "})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:n.userType})})]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)("h5",{children:Object(m.jsx)("small",{className:"text-muted",children:"Your rating: "})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(Me,{userId:n.userId})})]}),Object(m.jsxs)(l.a,{className:"mt-4",children:[Object(m.jsx)(j.a,{children:Object(m.jsxs)(Y.a,{variant:"outline-dark",as:L.b,to:"/editprofile",children:[Object(m.jsx)(Ve.a,{})," Edit profile"]})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(Y.a,{variant:"outline-danger",onClick:function(){return S(!0)},children:[Object(m.jsx)(xe.a,{})," Delete profile"]})})]})]})})]})}),Object(m.jsxs)(ue.a,{show:w,onHide:I,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Do you really want to delete your profile?"})}),Object(m.jsx)(ue.a.Body,{children:"All your ads, your favotites and all your data will be deleted."}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:I,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:C,children:"Yes, pls delete!"})]})]})]})},Ze=function(){var e=Object(a.useContext)(f).signOut,t=Object(a.useState)(!0),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(null),o=Object(h.a)(s,2),i=o[0],d=o[1],O=Object(a.useState)(""),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(""),k=Object(h.a)(y,2),w=k[0],S=k[1],I=Object(a.useState)(""),C=Object(h.a)(I,2),N=C[0],T=C[1],B=Object(a.useState)(""),A=Object(h.a)(B,2),E=A[0],D=A[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","users/").concat(localStorage.getItem("userId")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,v(c.name),S(c.phone),T(c.email),console.log(c),r(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(d(e.t0.response.data.error),setTimeout((function(){return d(null)}),5e3),r(!1)):(d(e.t0.message),setTimeout((function(){return d(null)}),5e3),r(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var z=function(){var t=Object(b.a)(u.a.mark((function t(){var c,a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={userName:g,email:N,phone:w},t.prev=1,r(!0),t.next=5,x.a.put("".concat("https://ekosh.software/","users/").concat(localStorage.getItem("userId")),c,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:a=t.sent,n=a.data,console.log(n),String(n.id)===localStorage.getItem("userId")&&(D("You must re-login for the changes to take effect!"),setTimeout((function(){return e()}),5e3)),r(!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),t.t0.response?(d(t.t0.response.data.error),r(!1)):(d(t.t0.message),r(!1));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}();return n?Object(m.jsx)(fe,{}):E?Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsx)(X.a,{children:E})}):Object(m.jsxs)(l.a,{className:"justify-content-center",children:[i&&Object(m.jsx)(X.a,{children:i}),Object(m.jsxs)(j.a,{sm:4,children:[Object(m.jsx)(Be.a,{controlId:"floatingInputUserName",label:"Enter your name (required)",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Some username",onChange:function(e){return v(e.target.value)},value:g,required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingInputEmail",label:"Enter your email (required)",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Some email",onChange:function(e){return T(e.target.value)},value:N,required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingInputPhoneNumber",label:"Enter your name (required)",className:"mb-2",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Some phone number",onChange:function(e){return S(e.target.value)},value:w,required:!0})}),Object(m.jsxs)("div",{className:"d-grid gap-2",children:[Object(m.jsx)(Y.a,{variant:"primary",size:"sm",onClick:z,children:"Save changes"}),Object(m.jsx)(Y.a,{variant:"secondary",size:"sm",as:L.b,to:"/",children:"Cancel"})]})]})]})},We=function(){var e={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"multipart/form-data"}},t=Object(o.i)().storeId,c=Object(a.useState)(!1),n=Object(h.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(null),d=Object(h.a)(i,2),O=d[0],p=d[1],f=Object(a.useState)(""),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(""),w=Object(h.a)(k,2),S=w[0],I=w[1],C=Object(a.useState)(""),N=Object(h.a)(C,2),T=N[0],B=N[1],A=Object(a.useState)(""),E=Object(h.a)(A,2),D=E[0],z=E[1],F=Object(a.useState)(),P=Object(h.a)(F,2),R=P[0],U=P[1],M=Object(a.useState)(),q=Object(h.a)(M,2),V=q[0],K=q[1],Z=Object(a.useState)(),W=Object(h.a)(Z,2),J=W[0],Q=W[1],$=Object(a.useState)(),_=Object(h.a)($,2),ee=_[0],te=_[1],ce=Object(o.g)();Object(a.useEffect)((function(){t&&function(){var e=Object(b.a)(u.a.mark((function e(){var c,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),c="".concat("https://ekosh.software/","stores/my/"),"999"===localStorage.getItem("userType")&&(console.log("adamin"),c="".concat("https://ekosh.software/","stores/").concat(t)),e.next=6,x.a.get(c,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 6:a=e.sent,n=a.data,y(n.title),I(n.address),B(n.description),z(n.photo),U(n.cityId),K(n.coords),Q(n.cityName),te(n.adminId),console.log(n),s(!1),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),e.t0.response?(p(e.t0.response.data.error),setTimeout((function(){return p(null)}),5e3),s(!1)):(p(e.t0.message),setTimeout((function(){return p(null)}),5e3),s(!1));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var ae=function(){var t=Object(b.a)(u.a.mark((function t(c){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("image",c.target.files[0]),t.prev=2,s(!0),t.next=6,x.a.post("".concat("https://ekosh.software/","image-upload"),a,e);case 6:n=t.sent,r=n.data,console.log(r),z(r[0]),s(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),t.t0.response?(p(t.t0.response.data.error),setTimeout((function(){return p(null)}),5e3),s(!1)):(p(t.t0.message),setTimeout((function(){return p(null)}),5e3),s(!1));case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),ne=function(){var e=Object(b.a)(u.a.mark((function e(){var c,a,n,r,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("id",localStorage.getItem("userId"),ee),c="999"===localStorage.getItem("userType")?ee:parseInt(localStorage.getItem("userId"),10),a={title:v,address:S,description:T,coords:V,cityId:R,photo:D,ownerId:c},e.prev=3,s(!0),!t){e.next=13;break}return e.next=8,x.a.put("".concat("https://ekosh.software/","stores/").concat(t),a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 8:r=e.sent,o=r.data,n=o,e.next=18;break;case 13:return e.next=15,x.a.post("".concat("https://ekosh.software/","stores/"),a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 15:i=e.sent,l=i.data,n=l;case 18:console.log(n),n.id&&(s(!1),ce.push("/mystore")),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),e.t0.response?(p(e.t0.response.data.error),s(!1)):(p(e.t0.message),s(!1));case 25:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(){return e.apply(this,arguments)}}();return r?Object(m.jsx)(fe,{}):Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsxs)(j.a,{md:10,children:[O&&Object(m.jsx)(X.a,{children:O}),Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(j.a,{md:4,children:[Object(m.jsx)(Be.a,{controlId:"floatingInputStoreName",label:"Enter name of your store (required)",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Some title",onChange:function(e){return y(e.target.value)},value:v,required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingInputStoreDescription",label:"Enter your store's description (required)",className:"mb-2",children:Object(m.jsx)(H.a.Control,{as:"textarea",placeholder:"Some descriptiion",style:{height:"300px"},onChange:function(e){return B(e.target.value)},value:T,required:!0})})]}),Object(m.jsxs)(j.a,{md:4,children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingInputStoreAddress",label:"Enter address of your store (required)",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Some address",onChange:function(e){return I(e.target.value)},value:S,required:!0})})})}),Object(m.jsx)(l.a,{className:"my-2",children:Object(m.jsx)(j.a,{children:Object(m.jsx)(G,{cityPlaceholder:J,setCoords:K,setCityId:U})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Fe,{setCoords:K,coords:V})})})]}),Object(m.jsxs)(j.a,{md:4,children:[Object(m.jsxs)(H.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(m.jsx)(H.a.Control,{type:"file",onChange:ae}),Object(m.jsx)(H.a.Label,{children:"Choose photo or logo"})]}),D&&Object(m.jsx)("img",{src:"".concat("https://ekosh.software/","images/").concat(D),style:{objectFit:"scale-down",width:"18rem",height:"20rem"},alt:"logo"})]})]}),Object(m.jsxs)(l.a,{className:"d-grid gap-2",children:[Object(m.jsx)(Y.a,{variant:"primary",size:"sm",onClick:ne,children:"Save changes"}),Object(m.jsx)(Y.a,{variant:"secondary",size:"sm",as:L.b,to:"/",children:"Cancel"})]})]})})},Ge=function(){var e=Object(a.useContext)(f),t=e.categoriesList,c=e.subCategoriesList,n=e.searchParams,r=e.setSearchParams,s=Object(a.useState)(),o=Object(h.a)(s,2),i=o[0],d=o[1],O=Object(a.useState)(null),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(!0),k=Object(h.a)(y,2),w=k[0],S=k[1],I=Object(a.useState)(),C=Object(h.a)(I,2),N=C[0],T=C[1],B=Object(a.useState)(),A=Object(h.a)(B,2),E=A[0],D=A[1],z=Object(a.useState)([]),F=Object(h.a)(z,2),P=F[0],R=F[1],U=Object(a.useState)(!1),L=Object(h.a)(U,2),M=L[0],q=L[1],Y=Object(a.useState)(!1),V=Object(h.a)(Y,2),K=V[0],Z=V[1],W=Object(a.useState)(1),G=Object(h.a)(W,2),J=G[0],Q=G[1],$=Object(a.useState)(),_=Object(h.a)($,2),ee=_[0],te=_[1];return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),console.log("https://ekosh.software/"),e.next=5,x.a.post("".concat("https://ekosh.software/","search/v2/?skip=").concat(8*(J-1),"&limit=").concat(8),n);case 5:t=e.sent,c=t.data,d(c),c.length>0?te(Math.ceil(parseInt(c[0].totalRows,10)/8)):(te(0),Q(1)),console.log(c),S(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(v(e.t0.response.data.error),setTimeout((function(){return v(null)}),3e3),S(!1)):(v(e.t0.message),setTimeout((function(){return v(null)}),3e3),S(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[n,J]),Object(a.useEffect)((function(){console.log(M),r(M?function(e){return{cityId:e.cityId,cityCoords:e.cityCoords,distance:e.distance,searchText:e.searchText,catId:N,subCatId:null}}:function(e){return{cityId:e.cityId,cityCoords:e.cityCoords,distance:e.distance,searchText:e.searchText,catId:null,subCatId:null}})}),[M,N,r]),Object(a.useEffect)((function(){console.log(K),r(K?function(e){return{cityId:e.cityId,cityCoords:e.cityCoords,distance:e.distance,searchText:e.searchText,catId:null,subCatId:E}}:function(e){return{cityId:e.cityId,cityCoords:e.cityCoords,distance:e.distance,searchText:e.searchText,catId:null,subCatId:null}})}),[K,E,r]),Object(a.useEffect)((function(){if(N){var e=c.filter((function(e){return e.parentId===N}));R(e),e.length>0?D(e[0].id):D("")}else t&&t.length>0&&T(t[0].id)}),[N,c,t]),w?Object(m.jsx)(fe,{}):g?Object(m.jsx)(X.a,{variant:"danger",children:g}):Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{sm:3,children:Object(m.jsx)(Be.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(H.a.Select,{"aria-label":"Categories list",value:N,onChange:function(e){return T(parseInt(e.target.value,10))},children:t.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"catk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("div",{className:"form-check form-switch",children:[Object(m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"switchUseCategories",defaultChecked:M,onChange:function(e){!0===e.target.checked&&Z(!1),q(e.target.checked)}}),Object(m.jsx)("label",{className:"form-check-label",htmlFor:"switchUseCategories",children:"Search in this category"})]})})]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{sm:3,children:Object(m.jsx)(Be.a,{controlId:"floatingSelectSubCat",label:"Choose sub-category",children:Object(m.jsx)(H.a.Select,{"aria-label":"Sub categories list",value:E,onChange:function(e){return D(parseInt(e.target.value,10))},children:P.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"subCatk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("div",{className:"form-check form-switch",children:[Object(m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"switchUseSubCategories",defaultChecked:K,onChange:function(e){!0===e.target.checked&&q(!1),Z(e.target.checked)}}),Object(m.jsx)("label",{className:"form-check-label",htmlFor:"switchUseSubCategories",children:"Search in this sub category"})]})})]}),Object(m.jsxs)(l.a,{className:"g-4 mt-3 border-top",children:[i.length<1&&Object(m.jsx)(ke,{}),i.map((function(e,t){return Object(m.jsx)(me,{title:e.title,photo:e.photos,address:e.address,price:e.price,created:e.created,catId:e.catId,category:e.category,subCategoryId:e.subCategoryId,subCategory:e.subCategory,cityName:e.cityName,cityId:e.cityId,adId:e.adId,views:e.views},"adk".concat(t))}))]})]}),Object(m.jsx)(l.a,{className:"d-flex align-items-center justify-content-center mt-5 border-top pt-3",children:Object(m.jsx)(j.a,{sm:"auto",className:"align-self-center",children:Object(m.jsx)(ye,{totalPages:ee,currentPage:J,cbPageClick:Q})})})]})},Je=c(275),Qe=c(276),$e=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(!0),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useState)(),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(!1),S=Object(h.a)(w,2),I=S[0],C=S[1],N=Object(a.useState)(!1),T=Object(h.a)(N,2),B=T[0],A=T[1],E=Object(a.useState)(!1),D=Object(h.a)(E,2),z=D[0],F=D[1],P=Object(a.useState)(!1),R=Object(h.a)(P,2),U=R[0],M=R[1],q=Object(a.useState)(),V=Object(h.a)(q,2),K=V[0],Z=V[1],W=Object(a.useState)(),G=Object(h.a)(W,2),J=G[0],Q=G[1],$=Object(a.useState)([]),_=Object(h.a)($,2),ee=_[0],te=_[1],ce=Object(a.useState)(!1),ae=Object(h.a)(ce,2),ne=ae[0],re=ae[1],se=function(){return re(!1)},oe=function(){return C(!1)};Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),console.log("https://ekosh.software/"),e.next=5,x.a.get("".concat("https://ekosh.software/","ads/byuser/").concat(localStorage.getItem("userId")));case 5:t=e.sent,c=t.data,n(c),console.log(c),f(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[U]),Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat("https://ekosh.software/","adstates"));case 3:t=e.sent,c=t.data,te(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),5e3),f(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),5e3),f(!1));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var ie=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.delete("".concat("https://ekosh.software/","ads/").concat(y),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),C(!1),c.id===y&&A(!0),f(!1),M((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={adNewStateId:J},e.prev=1,f(!0),e.next=5,x.a.put("".concat("https://ekosh.software/","adstates/updatestate/").concat(K),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),re(!1),a.id===K&&F(!0),f(!1),M((function(e){return!e})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),5e3),f(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),5e3),f(!1));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return p?Object(m.jsx)(fe,{}):o?Object(m.jsx)(X.a,{variant:"danger",children:o}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Your ads"})})}),Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(be.a,{className:"p-3",position:"middle-center",children:[Object(m.jsx)(he.a,{bg:"warning",onClose:function(){return A(!1)},show:B,delay:3e3,autohide:!0,children:Object(m.jsxs)(he.a.Body,{children:[" Ad # ",y," was deleted! "]})}),Object(m.jsx)(he.a,{bg:"warning",onClose:function(){return F(!1)},show:z,delay:3e3,autohide:!0,children:Object(m.jsx)(he.a.Body,{children:" Status successfully changed! "})})]}),Object(m.jsxs)(Je.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Sub category"}),Object(m.jsx)("th",{children:"Category"}),Object(m.jsx)("th",{children:"Created on"}),Object(m.jsx)("th",{children:"Edit"}),Object(m.jsx)("th",{children:"Delete"}),Object(m.jsx)("th",{children:"Status"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/view/".concat(e.adId),style:{textDecoration:"none"},children:e.adId})}),Object(m.jsx)("td",{children:e.title}),Object(m.jsx)("td",{children:e.price}),Object(m.jsx)("td",{children:e.subCategory}),Object(m.jsx)("td",{children:e.category}),Object(m.jsx)("td",{children:new Date(e.created).toLocaleString()}),Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/editad/".concat(e.adId),children:Object(m.jsx)(Ve.a,{size:24})})}),Object(m.jsx)("td",{children:Object(m.jsx)(xe.a,{size:24,style:{cursor:"pointer"},onClick:function(){k(e.adId),C(!0)}})}),Object(m.jsx)("td",{children:Object(m.jsx)(Qe.a,{size:24,style:{cursor:"pointer"},onClick:function(){Q(e.currentState),Z(e.adId),re(!0)}})})]},"adk".concat(t))}))})]})]})]})}),Object(m.jsxs)(ue.a,{show:I,onHide:oe,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(ue.a.Body,{children:["Do you really want to delete ad # ",y," ?"]}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:oe,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:ie,children:"Yes, pls delete!"})]})]}),Object(m.jsxs)(ue.a,{show:ne,onHide:se,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Edit description"})}),Object(m.jsx)(ue.a.Body,{children:Object(m.jsx)(Be.a,{controlId:"floatingSelectStatus",label:"Choose status",children:Object(m.jsx)(H.a.Select,{"aria-label":"Ad statuses list",value:J,onChange:function(e){return Q(parseInt(e.target.value,10))},children:ee.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"statusk".concat(t))}))})})}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:se,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:le,children:"Save changes"})]})]})]})},_e=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(!0),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useState)(),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(!1),S=Object(h.a)(w,2),I=S[0],C=S[1],N=Object(a.useState)(!1),T=Object(h.a)(N,2),B=T[0],A=T[1],E=Object(a.useState)(!1),D=Object(h.a)(E,2),z=D[0],F=D[1],P=Object(a.useState)(),R=Object(h.a)(P,2),U=R[0],M=R[1],q=Object(a.useState)(),V=Object(h.a)(q,2),K=V[0],Z=V[1],W=Object(a.useState)(""),G=Object(h.a)(W,2),J=G[0],Q=G[1],$=Object(a.useState)(!1),_=Object(h.a)($,2),ee=_[0],te=_[1],ce=function(){return te(!1)},ae=function(){return C(!1)};Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),console.log("https://ekosh.software/"),e.next=5,x.a.get("".concat("https://ekosh.software/","favads/myfav/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:t=e.sent,c=t.data,n(c),console.log(c),f(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[z]);var ne=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.delete("".concat("https://ekosh.software/","favads/").concat(y),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),C(!1),c.id===y&&A(!0),f(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={favAdId:K,description:J},e.prev=1,f(!0),e.next=5,x.a.put("".concat("https://ekosh.software/","favads/").concat(U),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),te(!1),f(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return p?Object(m.jsx)(fe,{}):o?Object(m.jsx)(X.a,{variant:"danger",children:o}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Your fav ads"})})}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(be.a,{className:"p-3",position:"middle-center",children:Object(m.jsx)(he.a,{bg:"warning",onClose:function(){return A(!1)},show:B,delay:3e3,autohide:!0,children:Object(m.jsxs)(he.a.Body,{children:[" Fav # ",y," was deleted! "]})})}),Object(m.jsxs)(Je.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Description"}),Object(m.jsx)("th",{children:"Edit"}),Object(m.jsx)("th",{children:"Delete"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/view/".concat(e.adId),style:{textDecoration:"none"},children:e.adTitle})}),Object(m.jsx)("td",{children:e.description}),Object(m.jsxs)("td",{children:[Object(m.jsx)(Ve.a,{size:24,style:{cursor:"pointer"},onClick:function(){Q(e.description),M(e.id),Z(e.adId),te(!0)}})," "]}),Object(m.jsx)("td",{children:Object(m.jsx)(xe.a,{size:24,style:{cursor:"pointer"},onClick:function(){k(e.id),C(!0)}})})]},"adk".concat(t))}))})]})]})]})}),Object(m.jsxs)(ue.a,{show:I,onHide:ae,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(ue.a.Body,{children:["Do you really want to remove from favotites # ",y," ?"]}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:ae,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:ne,children:"Yes, pls delete!"})]})]}),Object(m.jsxs)(ue.a,{show:ee,onHide:ce,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Edit description"})}),Object(m.jsx)(ue.a.Body,{children:Object(m.jsx)(H.a.Control,{value:J,cols:40,onChange:function(e){return Q(e.target.value)},as:"textarea",rows:3})}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:ce,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:re,children:"Save changes"})]})]})]})},Xe=c(277),et=c(278),tt=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(!0),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useState)(!1),v=Object(h.a)(g,2),y=v[0],k=v[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","messages/inbox/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,n(c),console.log(c),f(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),3e3),f(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),3e3),f(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[y]);var w=function(){var e=Object(b.a)(u.a.mark((function e(t){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","messages/markread/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=e.sent,(a=c.data).id===t&&k((function(e){return!e})),console.log(a),f(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),3e3),f(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),3e3),f(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(u.a.mark((function e(t){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.delete("".concat("https://ekosh.software/","messages/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=e.sent,(a=c.data).id===t&&k((function(e){return!e})),console.log(a),f(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),3e3),f(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),3e3),f(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(m.jsx)(fe,{}):o?Object(m.jsx)(X.a,{variant:"danger",children:o}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Your notifications"})})}),Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(Je.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"From"}),Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Link to ad"}),Object(m.jsx)("th",{children:"Mark"})]})}),Object(m.jsx)("tbody",{children:c&&c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{children:e.fromUserName})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{children:e.msgRead?e.msgTitle:Object(m.jsx)("mark",{children:e.msgTitle})})}),Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/view/".concat(e.adId),style:{textDecoration:"none"},children:e.adId})}),Object(m.jsxs)("td",{children:[e.msgRead?Object(m.jsx)(Xe.a,{size:24}):Object(m.jsx)(et.a,{size:24,style:{cursor:"pointer"},onClick:function(){w(e.id)}}),Object(m.jsx)(xe.a,{size:24,style:{cursor:"pointer"},onClick:function(){S(e.id)}})]})]},"adk".concat(t))}))})]}),(!c||c.length<1)&&Object(m.jsx)(X.a,{variant:"danger",children:"No notifications"})]})]})})})},ct=function(){var e=Object(a.useState)({}),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!0),s=Object(h.a)(r,2),i=s[0],d=s[1],O=Object(a.useState)(null),p=Object(h.a)(O,2),f=p[0],g=p[1],v=Object(o.g)(),y=Object(a.useState)(!1),k=Object(h.a)(y,2),w=k[0],S=k[1],I=function(){return S(!1)},C=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,x.a.delete("".concat("https://ekosh.software/","stores/").concat(c.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,t.data.id===c.id&&(d(!1),v.push("/myprofile")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),5e3),d(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),5e3),d(!1));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","stores/my/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,n(c),console.log(c),d(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),5e3),d(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),5e3),d(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),i?Object(m.jsx)(fe,{}):c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Your store"})})}),Object(m.jsxs)(l.a,{className:"justify-content-center",children:[f&&Object(m.jsx)(X.a,{children:f}),Object(m.jsxs)(j.a,{sm:6,children:[Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(j.a,{className:"p-3",children:[Object(m.jsx)("h4",{children:c.title}),Object(m.jsx)("p",{style:{whiteSpace:"pre-line"},children:c.description}),Object(m.jsx)("h6",{children:Object(m.jsx)("small",{className:"text-muted",children:"Address: "})}),Object(m.jsxs)("p",{children:[c.address,", ",c.cityName]})]}),Object(m.jsx)(j.a,{sm:6,className:"p-3",children:Object(m.jsx)("img",{src:"".concat("https://ekosh.software/","images/").concat(c.photo),style:{objectFit:"scale-down",width:"18rem",height:"20rem"},alt:"logo"})})]}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:"p-3",children:Object(m.jsx)(ze.a,{height:300,center:c.coords,defaultZoom:11,children:c.coords&&Object(m.jsx)(ze.b,{width:50,anchor:c.coords})})})}),Object(m.jsxs)(l.a,{className:"justify-content-center",children:[Object(m.jsx)(j.a,{children:Object(m.jsxs)(Y.a,{variant:"outline-dark",as:L.b,to:"/editstore/".concat(c.id),children:[Object(m.jsx)(Ve.a,{})," Edit store data"]})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(Y.a,{variant:"outline-danger",onClick:function(){return S(!0)},children:[Object(m.jsx)(xe.a,{})," Delete store"]})})]})]})]})]})}),Object(m.jsxs)(ue.a,{show:w,onHide:I,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Do you really want to delete your store?"})}),Object(m.jsx)(ue.a.Body,{children:"All your ads will be deleted."}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:I,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:C,children:"Yes, pls delete!"})]})]})]}):Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsx)(j.a,{sm:6,children:Object(m.jsxs)("p",{className:"text-center",children:["You don't have a store yet. You can"," ",Object(m.jsx)("mark",{children:Object(m.jsx)(L.b,{to:"/registerstore",children:"register"})})," ","one."]})})})},at=function(){var e=Object(o.i)().storeId,t=Object(a.useState)({}),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(!0),i=Object(h.a)(s,2),d=i[0],O=i[1],p=Object(a.useState)(null),f=Object(h.a)(p,2),g=f[0],v=f[1];return Object(a.useEffect)((function(){(function(){var t=Object(b.a)(u.a.mark((function t(){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(!0),t.next=4,x.a.get("".concat("https://ekosh.software/","stores/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=t.sent,a=c.data,r(a),console.log(a),O(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response?(v(t.t0.response.data.error),setTimeout((function(){return v(null)}),5e3),O(!1)):(v(t.t0.message),setTimeout((function(){return v(null)}),5e3),O(!1));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),d?Object(m.jsx)(fe,{}):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(l.a,{className:"justify-content-center",children:[g&&Object(m.jsx)(X.a,{children:g}),Object(m.jsxs)(j.a,{sm:6,children:[Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(j.a,{className:"p-3",children:[Object(m.jsx)(L.b,{to:"/bystore/".concat(n.id),style:{textDecoration:"none"},children:Object(m.jsx)("h4",{children:n.title})}),Object(m.jsx)("p",{style:{whiteSpace:"pre-line"},children:n.description}),Object(m.jsx)("h6",{children:Object(m.jsx)("small",{className:"text-muted",children:"Address: "})}),Object(m.jsxs)("p",{children:[n.address,", ",n.cityName]})]}),Object(m.jsx)(j.a,{sm:6,className:"p-3",children:Object(m.jsx)("img",{src:"".concat("https://ekosh.software/","images/").concat(n.photo),style:{objectFit:"scale-down",width:"18rem",height:"20rem"},alt:"logo"})})]}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:"p-3",children:Object(m.jsx)(ze.a,{height:300,center:n.coords,defaultZoom:11,children:n.coords&&Object(m.jsx)(ze.b,{width:50,anchor:n.coords})})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:'d-grid gap-2"',children:Object(m.jsxs)(Y.a,{variant:"outline-secondary",size:"lg",as:L.b,to:"/bystore/".concat(n.id),children:[n.title,"'s ads"]})})})]})]})})},nt=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"404"})})},rt=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(!0),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useState)(),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(!1),S=Object(h.a)(w,2),I=S[0],C=S[1],N=Object(a.useState)(!1),T=Object(h.a)(N,2),B=T[0],A=T[1],E=Object(a.useState)(!1),D=Object(h.a)(E,2),z=D[0],F=D[1],P=Object(a.useState)(),R=Object(h.a)(P,2),U=R[0],M=R[1],q=Object(a.useState)(),V=Object(h.a)(q,2),K=V[0],Z=V[1],W=Object(a.useState)(""),G=Object(h.a)(W,2),J=G[0],Q=G[1],$=Object(a.useState)(!1),_=Object(h.a)($,2),ee=_[0],te=_[1],ce=function(){return te(!1)},ae=function(){return C(!1)};Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),console.log("https://ekosh.software/"),e.next=5,x.a.get("".concat("https://ekosh.software/","favusers/myfav/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:t=e.sent,c=t.data,n(c),console.log(c),f(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[z]);var ne=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.delete("".concat("https://ekosh.software/","favusers/").concat(y),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),C(!1),c.id===y&&A(!0),f(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={favUserId:K,description:J},e.prev=1,f(!0),e.next=5,x.a.put("".concat("https://ekosh.software/","favusers/").concat(U),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),te(!1),f(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return p?Object(m.jsx)(fe,{}):o?Object(m.jsx)(X.a,{variant:"danger",children:o}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Your fav users"})})}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(be.a,{className:"p-3",position:"middle-center",children:Object(m.jsx)(he.a,{bg:"warning",onClose:function(){return A(!1)},show:B,delay:3e3,autohide:!0,children:Object(m.jsxs)(he.a.Body,{children:[" Fav # ",y," was deleted! "]})})}),Object(m.jsxs)(Je.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"User"}),Object(m.jsx)("th",{children:"Your description"}),Object(m.jsx)("th",{children:"Edit"}),Object(m.jsx)("th",{children:"Delete"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/byuser/".concat(e.targetUserId),style:{textDecoration:"none"},children:e.userName})}),Object(m.jsx)("td",{children:e.description}),Object(m.jsxs)("td",{children:[Object(m.jsx)(Ve.a,{size:24,style:{cursor:"pointer"},onClick:function(){Q(e.description),M(e.id),Z(e.targetUserId),te(!0)}})," "]}),Object(m.jsx)("td",{children:Object(m.jsx)(xe.a,{size:24,style:{cursor:"pointer"},onClick:function(){k(e.id),C(!0)}})})]},"adk".concat(t))}))})]})]})]})}),Object(m.jsxs)(ue.a,{show:I,onHide:ae,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(ue.a.Body,{children:["Do you really want to remove from favotites # ",y," ?"]}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:ae,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:ne,children:"Yes, pls delete!"})]})]}),Object(m.jsxs)(ue.a,{show:ee,onHide:ce,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Edit description"})}),Object(m.jsx)(ue.a.Body,{children:Object(m.jsx)(H.a.Control,{value:J,cols:40,onChange:function(e){return Q(e.target.value)},as:"textarea",rows:3})}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:ce,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:re,children:"Save changes"})]})]})]})},st={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},ot=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(""),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useState)(""),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(!0),S=Object(h.a)(w,2),I=S[0],C=S[1],N=Object(a.useState)(null),T=Object(h.a)(N,2),B=T[0],A=T[1],E=Object(a.useState)(!1),D=Object(h.a)(E,2),z=D[0],F=D[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","usertypes/"),st);case 4:t=e.sent,c=t.data,n(c),console.log(c),C(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(A(e.t0.response.data.error),setTimeout((function(){return A(null)}),3e3),C(!1)):(A(e.t0.message),setTimeout((function(){return A(null)}),3e3),C(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[z]),Object(a.useEffect)((function(){if(c&&o){var e=c.find((function(e){return e.id===o}));f(e.typeDescription),k(e.id)}}),[o,c]);var P=function(){var e=Object(b.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,C(!0),"put"!==t){e.next=8;break}return e.next=5,x.a.put("".concat("https://ekosh.software/","usertypes/").concat(o),{userTypeId:y,userType:p},st);case 5:c=e.sent,e.next=18;break;case 8:if("delete"!==t){e.next=14;break}return e.next=11,x.a.delete("".concat("https://ekosh.software/","usertypes/").concat(o),st);case 11:c=e.sent,e.next=18;break;case 14:if("new"!==t){e.next=18;break}return e.next=17,x.a.post("".concat("https://ekosh.software/","usertypes/"),{userTypeId:y,userType:p},st);case 17:c=e.sent;case 18:console.log(c),F(!z),C(!1),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),e.t0.response?(A(e.t0.response.data.error),setTimeout((function(){return A(null)}),3e3),C(!1)):(A(e.t0.message),setTimeout((function(){return A(null)}),3e3),C(!1));case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}();return I?Object(m.jsx)(fe,{}):Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(l.a,{className:"py-4 bg-warning my-4",children:[B&&Object(m.jsx)(j.a,{children:Object(m.jsx)(X.a,{children:B})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(Be.a,{controlId:"floatingSelectType",label:"Choose type",children:Object(m.jsx)(H.a.Select,{"aria-label":"Types list",value:o,onChange:function(e){return i(parseInt(e.target.value,10))},children:c.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.typeDescription},"uTk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(M.a,{children:[Object(m.jsx)(Be.a,{controlId:"floatingInputDescription",label:"Type description",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Type description",value:p,onChange:function(e){return f(e.target.value)},required:!0})}),Object(m.jsx)(Be.a,{controlId:"floatingInputTypeId",label:"Type id",className:"mb-1",children:Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Type id",value:y,onChange:function(e){return k(parseInt(e.target.value,10))},required:!0})})]})})]}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{sm:5,children:Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(Y.a,{onClick:function(){return P("new")},variant:"outline-dark",disabled:0===p.length,children:"Add New"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(Y.a,{onClick:function(){return P("put")},variant:"outline-dark",disabled:0===p.length||!o,children:"Rename"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(Y.a,{onClick:function(){return P("delete")},variant:"danger",disabled:0===p.length||!o,children:"Delete"})})]})})})]})})},it={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},lt=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(null),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useState)(!0),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(!1),S=Object(h.a)(w,2),I=S[0],C=S[1],N=Object(a.useState)(!1),T=Object(h.a)(N,2),B=T[0],A=T[1],E=Object(a.useState)(!1),D=Object(h.a)(E,2),z=D[0],F=D[1],P=Object(a.useState)(),R=Object(h.a)(P,2),U=R[0],M=R[1],q=Object(a.useState)(!0),V=Object(h.a)(q,2),K=V[0],Z=V[1],W=Object(a.useState)(),G=Object(h.a)(W,2),J=G[0],Q=G[1],$=Object(a.useState)(),_=Object(h.a)($,2),ee=_[0],te=_[1],ce=Object(a.useState)(),ae=Object(h.a)(ce,2),ne=ae[0],re=ae[1],se=Object(a.useState)(),oe=Object(h.a)(se,2),ie=oe[0],le=oe[1],je=function(){return A(!1)},de=function(){return F(!1)},Oe=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,x.a.delete("".concat("https://ekosh.software/","users/").concat(U),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),A(!1),c.id===U&&C(!0),k(!1),Z((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(f(e.t0.response.data.error),k(!1)):(f(e.t0.message),k(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={userName:J,email:ee,phone:ne,userType:ie},e.prev=1,k(!0),e.next=5,x.a.put("".concat("https://ekosh.software/","users/").concat(U),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),F(!1),a.id===U&&C(!0),k(!1),Z((function(e){return!e})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0.response?(f(e.t0.response.data.error),k(!1)):(f(e.t0.message),k(!1));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat("https://ekosh.software/","usertypes/"),it);case 3:t=e.sent,c=t.data,i(c),console.log(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?f(e.t0.response.data.error):f(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","users/"),it);case 4:t=e.sent,c=t.data,n(c),console.log(c),k(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(f(e.t0.response.data.error),setTimeout((function(){return f(null)}),3e3),k(!1)):(f(e.t0.message),setTimeout((function(){return f(null)}),3e3),k(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[K]),y?Object(m.jsx)(fe,{}):p?Object(m.jsx)(X.a,{variant:"danger",children:p}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Users: "})})}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(be.a,{className:"p-3",position:"middle-center",children:Object(m.jsx)(he.a,{bg:"warning",onClose:function(){return C(!1)},show:I,delay:3e3,autohide:!0,children:Object(m.jsxs)(he.a.Body,{children:[" Action on user ID # ",U," was performed! "]})})}),Object(m.jsxs)(Je.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"User name"}),Object(m.jsx)("th",{children:"E-mail"}),Object(m.jsx)("th",{children:"Registered"}),Object(m.jsx)("th",{children:"Was online"}),Object(m.jsx)("th",{children:"Phone"}),Object(m.jsx)("th",{children:"Store"}),Object(m.jsx)("th",{children:"Type"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/byuser/".concat(e.id),style:{textDecoration:"none"},children:e.name})}),Object(m.jsx)("td",{children:e.email}),Object(m.jsx)("td",{children:new Date(e.registerDate).toLocaleString()}),Object(m.jsx)("td",{children:new Date(e.wasOnline).toLocaleString()}),Object(m.jsx)("td",{children:e.phone}),Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/viewstore/".concat(e.storeId),style:{textDecoration:"none"},children:e.storeTitle})}),Object(m.jsx)("td",{children:e.userType}),Object(m.jsxs)("td",{children:[Object(m.jsx)(Ve.a,{size:24,style:{cursor:"pointer"},onClick:function(){M(e.id),le(e.userTypeId),Q(e.name),te(e.email),re(e.phone),F(!0)}})," ",Object(m.jsx)(xe.a,{size:24,style:{cursor:"pointer"},onClick:function(){M(e.id),A(!0)}})]})]},"usrK".concat(t))}))})]})]})]})}),Object(m.jsxs)(ue.a,{show:B,onHide:je,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(ue.a.Body,{children:["Do you really want to delete user with ID # ",U," ?"]}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:je,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:Oe,children:"Yes, pls delete!"})]})]}),Object(m.jsxs)(ue.a,{show:z,onHide:de,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Edit user"})}),Object(m.jsxs)(ue.a.Body,{children:[Object(m.jsx)(H.a.Control,{value:J,cols:40,onChange:function(e){return Q(e.target.value)},type:"text",className:"mb-2"}),Object(m.jsx)(H.a.Control,{value:ee,cols:40,onChange:function(e){return te(e.target.value)},type:"text",className:"mb-2"}),Object(m.jsx)(H.a.Control,{value:ne,cols:40,onChange:function(e){return re(e.target.value)},type:"text",className:"mb-2"}),Object(m.jsx)(Be.a,{controlId:"floatingSelectType",label:"Choose type",children:Object(m.jsx)(H.a.Select,{"aria-label":"Types list",value:ie,onChange:function(e){return le(parseInt(e.target.value,10))},children:o&&o.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.typeDescription},"uTk".concat(t))}))})})]}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:de,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:pe,children:"Save changes"})]})]})]})},jt=c(158),dt=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(10),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useCallback)((function(){console.log(o);var e={coords:o,radius:p};console.log(e),function(){var t=Object(b.a)(u.a.mark((function t(){var c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.post("".concat("https://ekosh.software/","stores/bycoords"),e);case 3:c=t.sent,a=c.data,n(a),console.log(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()()}),[o,p]);Object(a.useEffect)((function(){return g()}),[o,p,g]);return Object(a.useEffect)((function(){if(!o){navigator.geolocation.getCurrentPosition((function(e){return i([e.coords.latitude,e.coords.longitude])}),(function(e){return console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}}),[o]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsx)(j.a,{sm:4,children:Object(m.jsxs)(M.a,{children:[Object(m.jsx)(M.a.Text,{style:{backgroundColor:"#f7f7f9"},children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(G,{setCoords:i,setCityId:function(){}}),Object(m.jsx)(M.a.Text,{style:{backgroundColor:"#f7f7f9"},children:"+"}),Object(m.jsx)(q.a,{type:"text",as:"input",htmlSize:1,placeholder:"0 km",className:"mr-2","aria-label":"radius",onChange:function(e){var t=parseInt(e.target.value,10);Number.isInteger(t)&&f(t)},value:p,list:"distance-variants"}),Object(m.jsxs)("datalist",{id:"distance-variants",children:[Object(m.jsx)("option",{value:"5"}),Object(m.jsx)("option",{value:"10"}),Object(m.jsx)("option",{value:"15"}),Object(m.jsx)("option",{value:"25"}),Object(m.jsx)("option",{value:"50"})]})]})})}),Object(m.jsx)(l.a,{className:"mt-3",style:{height:"50vh"},children:Object(m.jsx)(j.a,{children:Object(m.jsxs)(ze.a,{provider:jt.a,center:o,defaultZoom:12,onClick:function(e){var t=e.latLng;i(t)},children:[c&&c.length>0&&c.map((function(e,t){return Object(m.jsx)(ze.b,{width:50,anchor:e.coords,color:"lightgreen"},"mrK".concat(t))})),o&&Object(m.jsx)(ze.b,{width:50,anchor:o}),c&&c.length>0&&c.map((function(e,t){return Object(m.jsx)(ze.c,{anchor:e.coords,offset:[0,50],children:Object(m.jsx)("div",{className:"bg-dark",style:{borderRadius:"10%",padding:"0 10px"},children:Object(m.jsxs)(L.b,{to:"/viewstore/".concat(e.id),children:[" ",Object(m.jsx)("p",{className:"text-light",children:e.title})]})})},"ovrlK".concat(t))}))]})})})]})},ut={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},bt=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(!0),O=Object(h.a)(d,2),p=O[0],f=O[1],g=Object(a.useState)(!1),v=Object(h.a)(g,2),y=v[0],k=v[1],w=Object(a.useState)(!1),S=Object(h.a)(w,2),I=S[0],C=S[1],N=Object(a.useState)(),T=Object(h.a)(N,2),B=T[0],A=T[1],E=Object(a.useState)(!0),D=Object(h.a)(E,2),z=D[0],F=D[1],P=function(){return C(!1)},R=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.delete("".concat("https://ekosh.software/","stores/").concat(B),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),C(!1),c.id===B&&k(!0),f(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),f(!1)):(i(e.t0.message),f(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.a.get("".concat("https://ekosh.software/","stores/"),ut);case 4:t=e.sent,c=t.data,n(c),console.log(c),f(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),3e3),f(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),3e3),f(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[z]),p?Object(m.jsx)(fe,{}):o?Object(m.jsx)(X.a,{variant:"danger",children:o}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Stores: "})})}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(be.a,{className:"p-3",position:"middle-center",children:Object(m.jsx)(he.a,{bg:"warning",onClose:function(){return k(!1)},show:y,delay:3e3,autohide:!0,children:Object(m.jsxs)(he.a.Body,{children:[" Store ID # ",B," was deleted! "]})})}),Object(m.jsxs)(Je.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Store"}),Object(m.jsx)("th",{children:"Description"}),Object(m.jsx)("th",{children:"Admin"}),Object(m.jsx)("th",{children:"Address"}),Object(m.jsx)("th",{children:"City"}),Object(m.jsx)("th",{children:"Logo"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/viewstore/".concat(e.id),style:{textDecoration:"none"},children:e.title})}),Object(m.jsx)("td",{children:e.description&&e.description.length>50?e.description.substring(0,50)+"...":e.description}),Object(m.jsxs)("td",{children:[e.storeAdmin," id#",e.adminId]}),Object(m.jsx)("td",{children:e.address}),Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/bycity/".concat(e.cityId),style:{textDecoration:"none"},children:e.cityName})}),Object(m.jsxs)("td",{children:[" ",Object(m.jsx)("img",{src:e.photo,style:{maxWidth:"30px",height:"auto",maxHeight:"30px"},alt:"store logo"})," "]}),Object(m.jsxs)("td",{children:[" ",Object(m.jsxs)(L.b,{to:"/editstore/".concat(e.id),children:[" ",Object(m.jsx)(Ve.a,{size:24,style:{cursor:"pointer"}})]})," ",Object(m.jsx)(xe.a,{size:24,style:{cursor:"pointer"},onClick:function(){A(e.id),C(!0)}})]})]},"sTrK".concat(t))}))})]})]})]})}),Object(m.jsxs)(ue.a,{show:I,onHide:P,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(ue.a.Header,{closeButton:!0,children:Object(m.jsx)(ue.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(ue.a.Body,{children:["Do you really want to delete store with ID # ",B," ?"]}),Object(m.jsxs)(ue.a.Footer,{children:[Object(m.jsx)(Y.a,{variant:"success",onClick:P,children:"No, missclicked!"}),Object(m.jsx)(Y.a,{variant:"danger",onClick:R,children:"Yes, pls delete!"})]})]})]})},ht=c(159),Ot=c.n(ht),xt=c(117),pt=c.n(xt),mt=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!1),s=Object(h.a)(r,2),o=(s[0],s[1]),i=Object(a.useState)(),l=Object(h.a)(i,2),j=l[0],d=l[1],u=Object(a.useState)(),b=Object(h.a)(u,2),O=(b[0],b[1]),x=Object(a.useState)(),p=Object(h.a)(x,2),m=(p[0],p[1]),f=Object(a.useState)(),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useRef)(),w=Object(a.useRef)(),S=Object(a.useRef)(),I=Object(a.useCallback)((function(e){S.current.emit("getMessagesFromOneChat",e)}),[]);return Object(a.useEffect)((function(){return navigator.mediaDevices.getUserMedia({audio:!0,video:{frameRate:24,width:{min:480,ideal:720,max:1280},aspectRatio:1.33333}}).then((function(e){console.log("stream",e),y(e),k.current.srcObject=e})).catch((function(e){return console.log(e)})),S.current=Ot()("https://ekosh.software/",{reconnection:!0,reconnectionAttempts:5,auth:{token:localStorage.getItem("token")}}),S.current.on("messagesFromChat",(function(e){n(e),console.log("msgs",e)})),S.current.on("connect_error",(function(e){console.log("Connection error...",e.data.content)})),S.current.on("error",(function(e){console.log("erro1234321",e)})),S.current.on("disconnect",(function(){console.log("Disconnected!")})),S.current.on("newChatMessage",(function(e){n((function(t){return[].concat(Object(ge.a)(t),[e])})),console.log("msg",e)})),S.current.on("callUser",(function(e){o(!0),console.log("user is calling",e),d(e.signal)})),function(){return S.current.disconnect()}}),[]),{messages:c,sendMessage:function(e){var t=e.toUser,c=e.message;S.current.emit("newChatMessage",{toUser:t,message:c})},getChat:I,setStream:y,callUser:function(e){var t=new pt.a({initiator:!0,trickle:!1,stream:v});t.on("signal",(function(t){S.current.emit("callUser",{userToCall:e,signalData:t})})),t.on("stream",(function(e){console.log("gotstream",e),k.current.srcObject=e})),S.current.on("callAccepted",(function(e){console.log("call accepted (signal)",e),O(!0),t.signal=e})),w.current=t},answerCall:function(e){O(!0);var t=new pt.a({initiator:!1,trickle:!1,stream:v});t.on("signal",(function(t){console.log("signal answer call",t),S.current.emit("answerCall",{signal:t,userToAnswer:e})})),t.on("stream",(function(e){console.log("got stream",e),k.current.srcObject=e})),console.log("caller signal",j),t.signal(j),w.current=t},leaveCall:function(){console.log("leaving call"),m(!0),w.current.destroy()},userVideoRef:k}},ft=function(){var e=Object(o.i)().withUserId,t=Object(a.useRef)(null),c=mt(),n=c.messages,r=c.sendMessage,s=c.getChat,i=c.callUser,d=c.answerCall,u=c.leaveCall,b=c.userVideoRef,O=Object(a.useState)(""),x=Object(h.a)(O,2),p=x[0],f=x[1];Object(a.useEffect)((function(){e&&s(e)}),[e,s]),Object(a.useEffect)((function(){return function(){var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[n]);return Object(m.jsx)(l.a,{className:"mt-3",children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)("h4",{children:"Chat"})})}),Object(m.jsx)(l.a,{className:"mt-2 border-top",children:Object(m.jsx)(j.a,{children:Object(m.jsxs)("div",{className:"overflow-auto",style:{height:"40vh"},children:[n&&n.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{children:[Object(m.jsxs)("span",{className:"h5",children:[e.senderName," "]})," ",Object(m.jsx)("em",{children:Object(m.jsx)("small",{children:new Date(e.msgTimeStamp).toLocaleString()})})]}),Object(m.jsx)("p",{children:e.message})]},"msgind".concat(t))})),Object(m.jsx)("div",{ref:t})]})})}),Object(m.jsx)(l.a,{className:"mt-2",children:Object(m.jsx)(j.a,{children:Object(m.jsx)(H.a,{onSubmit:function(t){t.preventDefault(),r({toUser:parseInt(e,10),message:p}),f("")},children:Object(m.jsxs)(M.a,{children:[Object(m.jsx)(H.a.Control,{type:"text",placeholder:"Enter your message here",value:p,onChange:function(e){return f(e.target.value)}}),Object(m.jsx)(Y.a,{type:"submit",children:"Send"})]})})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)("video",{ref:b,autoPlay:!0,style:{width:"400px",height:"400px",backgroundColor:"red"}})})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(Y.a,{onClick:function(){return i(e)},children:"callUser"}),Object(m.jsx)(Y.a,{onClick:function(){return d(e)},children:"answerCall"}),Object(m.jsx)(Y.a,{onClick:function(){return u()},children:"leaveCall"})]})})]})})},gt=c(279),vt=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!0),s=Object(h.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(null),O=Object(h.a)(d,2),p=O[0],f=O[1];return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),console.log("https://ekosh.software/"),e.next=5,x.a.get("".concat("https://ekosh.software/","chats/mychats/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:t=e.sent,c=t.data,n(c),console.log(c),i(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(f(e.t0.response.data.error),i(!1)):(f(e.t0.message),i(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[]),o?Object(m.jsx)(fe,{}):p?Object(m.jsx)(X.a,{variant:"danger",children:p}):Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{className:"text-center",children:Object(m.jsx)("h4",{children:"Your recent chats"})})}),Object(m.jsx)(l.a,{className:"mb-4",children:Object(m.jsx)(j.a,{children:Object(m.jsxs)(Je.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Date"}),Object(m.jsx)("th",{children:"User"}),Object(m.jsx)("th",{children:"Last message"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(L.b,{to:"/chat/".concat(e.idToChat),style:{textDecoration:"none"},children:new Date(e.msgTimeStamp).toLocaleString()})}),Object(m.jsxs)("td",{children:[Object(m.jsx)(L.b,{to:"/chat/".concat(e.idToChat),style:{textDecoration:"none"},children:e.nameToChat}),e.markUnread&&Object(m.jsx)(gt.a,{pill:!0,bg:"warning",text:"dark",children:" NEW"})]}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{className:"text-muted",children:Object(m.jsxs)("small",{children:[e.senderName,": "]})})," ",Object(m.jsxs)("em",{children:[" ",e.message]})]})})]},"chtk".concat(t))}))})]})})})]})})},yt=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=(t[0],t[1],Object(a.useRef)(null));return Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{sm:4}),Object(m.jsxs)(j.a,{sm:4,children:[Object(m.jsx)(Y.a,{onClick:function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{frameRate:24,width:{min:480,ideal:720,max:1280},aspectRatio:1.33333}}).then((function(e){console.log("stream",e),c.current.srcObject=e})).catch((function(e){return console.log(e)}))},children:"Call"}),Object(m.jsx)(Y.a,{onClick:function(){},children:"Audio"}),Object(m.jsx)(Y.a,{onClick:function(){},children:"Video"})]})]}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)("video",{ref:c,autoPlay:!0,style:{width:"400px",height:"400px",backgroundColor:"red"}})})})]})})};var kt=function(){return Object(m.jsx)(g,{children:Object(m.jsxs)(i.a,{fluid:!0,children:[Object(m.jsx)(ce,{}),Object(m.jsx)(l.a,{className:"justify-content-center my-4",children:Object(m.jsx)(j.a,{md:9,children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{exact:!0,path:"/",component:Se}),Object(m.jsx)(o.b,{exact:!0,path:"/buylocal",component:dt}),Object(m.jsx)(o.b,{exact:!0,path:"/chat",component:ft}),Object(m.jsx)(o.b,{exact:!0,path:"/view/:adId",component:Ye}),Object(m.jsx)(o.b,{exact:!0,path:"/signin",component:Ae}),Object(m.jsx)(o.b,{exact:!0,path:"/signup",component:Ee}),Object(m.jsx)(o.b,{exact:!0,path:"/video",component:yt}),Object(m.jsx)(o.b,{exact:!0,path:"/search",component:Ge}),Object(m.jsx)(o.b,{exact:!0,path:"/chat/:withUserId",component:ft}),Object(m.jsx)(o.b,{exact:!0,path:"/viewstore/:storeId",component:at}),Object(m.jsx)(k,{exact:!0,path:"/myprofile",component:Ke}),Object(m.jsx)(k,{exact:!0,path:"/myfavads",component:_e}),Object(m.jsx)(k,{exact:!0,path:"/myfavusers",component:rt}),Object(m.jsx)(k,{exact:!0,path:"/mystore",component:ct}),Object(m.jsx)(k,{exact:!0,path:"/messages",component:tt}),Object(m.jsx)(k,{exact:!0,path:"/mychats",component:vt}),Object(m.jsx)(k,{exact:!0,path:"/editprofile",component:Ze}),Object(m.jsx)(k,{exact:!0,path:"/registerstore",component:We}),Object(m.jsx)(k,{exact:!0,path:"/editstore/:storeId",component:We}),Object(m.jsx)(k,{exact:!0,path:"/newad",component:Re}),Object(m.jsx)(k,{exact:!0,path:"/myads",component:$e}),Object(m.jsx)(k,{exact:!0,path:"/editad/:adId",component:Re}),Object(m.jsx)(k,{exact:!0,path:"/admin/categoryeditor",component:Ue}),Object(m.jsx)(k,{exact:!0,path:"/admin/usertypeeditor",component:ot}),Object(m.jsx)(k,{exact:!0,path:"/admin/userlist",component:lt}),Object(m.jsx)(k,{exact:!0,path:"/admin/storeslist",component:bt}),Object(m.jsx)(o.b,{exact:!0,path:"/bysubcategory/:subCatId",component:Se}),Object(m.jsx)(o.b,{exact:!0,path:"/bycategory/:catId",component:Se}),Object(m.jsx)(o.b,{exact:!0,path:"/bycity/:cityId",component:Se}),Object(m.jsx)(o.b,{exact:!0,path:"/byuser/:adsByUserId",component:Se}),Object(m.jsx)(o.b,{exact:!0,path:"/bystore/:adsByStoreId",component:Se}),Object(m.jsx)(o.b,{path:"*",component:nt})]})})}),Object(m.jsx)(Te,{})]})})};s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(L.a,{basename:"/",children:Object(m.jsx)(kt,{})})}),document.getElementById("root"))}},[[233,1,2]]]);
//# sourceMappingURL=main.1d53ec67.chunk.js.map